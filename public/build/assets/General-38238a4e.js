import{d as $,u as j,a as D,b as S,r as M,i as F,c as o,o as r,e as m,w as e,f as g,g as t,h as p,t as T,j as l,k as y,l as L,m as H,n as Q,p as z,q as N,s as U,v as R}from"./app-a7de8b19.js";const Y={class:"d-flex align-center py-4 px-2 bg-grey-lighten-4"},I={class:"font-weight-bold text-h6 leading-none mt-2"},E={class:"text-caption text-blue-grey-lighten-1"},G={class:"pa-2"},J={class:"pa-2"},K=$({__name:"TheLeftNavigator",setup(V){const{name:_}=j(),a=D(),c=S(),u=M(!1);async function n(i){c.user.role_id!=i&&(u.value=!0,await c.changeRole(i),u.value=!1)}function d(i){return c.user.role_id==i?"primary":"grey-lighten-4"}const v=F("deferredPrompt");function k(){const i=D();i.dialog.open(()=>{i.dialog.title="Dasturdan chiqmoqchimisiz ?",i.dialog.submit=()=>c.logout()})}function h(){v&&(v.value.prompt(),v.value.userChoice.then(i=>{i.outcome==="accepted"?console.log("user accepted A2HS prompt"):console.log("user dismissed A2HS prompt"),v.value=null}))}return(i,s)=>{const C=o("v-icon"),B=o("v-divider"),b=o("v-btn"),x=o("v-col"),w=o("v-row"),q=o("v-navigation-drawer");return r(),m(q,{temporary:l(_)=="sm",modelValue:l(a).menu,"onUpdate:modelValue":s[2]||(s[2]=A=>l(a).menu=A)},{append:e(()=>[g("div",J,[t(b,{onClick:k,block:"","append-icon":"mdi-logout"},{default:e(()=>[p(" Chiqish ")]),_:1})])]),default:e(()=>{var A,f;return[g("main",Y,[t(C,{color:"primary",size:"40"},{default:e(()=>[p("mdi-vuetify")]),_:1}),g("aside",null,[g("div",I,T((A=l(c).user)==null?void 0:A.name),1),g("div",E,T((f=l(c).user)==null?void 0:f.phone),1)])]),t(B),g("div",null,[g("div",G,[l(c).isPassenger||l(c).isDriver?(r(),m(w,{key:0,class:"mb-3 mt-0"},{default:e(()=>[t(x,{cols:"6",class:"py-0 pr-1"},{default:e(()=>[t(b,{onClick:s[0]||(s[0]=P=>n(4)),loading:u.value,color:d(4),variant:"flat",block:""},{default:e(()=>[p(" Haydovchi ")]),_:1},8,["loading","color"])]),_:1}),t(x,{cols:"6",class:"py-0 pl-1"},{default:e(()=>[t(b,{onClick:s[1]||(s[1]=P=>n(3)),loading:u.value,color:d(3),variant:"flat",block:""},{default:e(()=>[p(" Yo'lovchi ")]),_:1},8,["loading","color"])]),_:1})]),_:1})):y("",!0),l(v)?(r(),m(b,{key:1,onClick:h,block:"","append-icon":"mdi-download",variant:"tonal",class:"mb-3"},{default:e(()=>[p(" Ilovani o'rnatish ")]),_:1})):y("",!0)])])]}),_:1},8,["temporary","modelValue"])}}}),O={class:"d-flex align-center"},W=$({__name:"TheAppBar",setup(V){const _=D(),a=S();return(c,u)=>{const n=o("v-app-bar-nav-icon"),d=o("v-icon"),v=o("v-app-bar-title"),k=o("v-app-bar");return r(),m(k,{density:"comfortable",elevation:0,border:1,color:"primary"},{prepend:e(()=>[t(n,{color:"white",onClick:u[0]||(u[0]=h=>l(_).menu=!l(_).menu)})]),default:e(()=>[t(v,null,{default:e(()=>{var h,i;return[g("div",O,[l(a).isDriver?(r(),m(d,{key:0},{default:e(()=>[p("mdi-chess-knight")]),_:1})):y("",!0),l(a).isPassenger?(r(),m(d,{key:1},{default:e(()=>[p("mdi-chess-pawn")]),_:1})):y("",!0),l(a).isAdmin?(r(),m(d,{key:2},{default:e(()=>[p("mdi-chess-rook")]),_:1})):y("",!0),l(a).isSuperAdmin?(r(),m(d,{key:3},{default:e(()=>[p("mdi-chess-king")]),_:1})):y("",!0),g("span",null,T((i=(h=l(a).user)==null?void 0:h.role)==null?void 0:i.name),1)])]}),_:1})]),_:1})}}}),X={class:"text-right w-100 px-2"},Z=$({__name:"TheLittleAppBar",setup(V){const _=S(),a=M(null),c=M(!1),u=L(()=>{var i,s;return(i=a.value)!=null&&i.name?(s=a.value)==null?void 0:s.name:"Qayerdasiz?"}),n=H({notification:!0,overlay:!1,loading:!0,city_loading:!1,regions:[],region_districts:[],region_id:null}),d=H({city_id:null,token:_.token});async function v(i){n.region_id=i,n.region_districts=[],n.city_loading=!0,d.city_id=null,await z.get(`district/${i}`).then(({data:s})=>{n.region_districts=s,n.city_loading=!1})}async function k(){n.overlay=!0,d.city_id=null,n.region_id=null;const{data:i}=await z.get("region");n.regions=i,v(a.value.region_id),d.city_id=a.value.id,n.overlay=!1}async function h(){const{data:i}=await z.post("firebase/set-city-topic",d);a.value=i}return Q(async()=>{z.post("firebase/get-city-topic",{token:_.token}).then(({data:i})=>{a.value=i,n.loading=!1}).catch(()=>{console.clear(),n.notification=!1,n.loading=!1})}),(i,s)=>{const C=o("v-btn"),B=o("v-icon"),b=o("v-autocomplete"),x=o("v-col"),w=o("BaseForm"),q=o("v-bottom-sheet"),A=o("v-app-bar");return r(),m(A,{density:"compact",elevation:0,border:1},{default:e(()=>[g("div",X,[n.notification?(r(),m(C,{key:0,onClick:s[0]||(s[0]=f=>c.value=!0),text:u.value,"append-icon":"mdi-map-marker",loading:n.loading},null,8,["text","loading"])):(r(),m(C,{key:1,disabled:""},{default:e(()=>[p("Habarnoma o'chirilgan")]),_:1}))]),t(q,{modelValue:c.value,"onUpdate:modelValue":s[5]||(s[5]=f=>c.value=f),inset:""},{default:e(()=>[t(w,{loading:n.overlay,submit:h,title:"Manzilni o'zgartirish",onClose:s[4]||(s[4]=f=>c.value=!1),onVnodeMounted:k},{default:e(()=>[g("p",null,[t(B,{color:"primary"},{default:e(()=>[p("mdi-bell-outline")]),_:1}),p(" Quyida ko'rsatgan manzilingizga qarab yo'lovchilar haqida sizga habarnoma junatamiz. ")]),t(x,{cols:"12",class:"px-0"},{default:e(()=>[t(b,{"onUpdate:modelValue":[s[1]||(s[1]=f=>v(f)),s[2]||(s[2]=f=>n.region_id=f)],items:n.regions,modelValue:n.region_id,label:"Viloyat","item-title":"name","item-value":f=>f.id,rules:l(N)},null,8,["items","modelValue","item-value","rules"])]),_:1}),t(x,{cols:"12",class:"px-0"},{default:e(()=>[t(b,{disabled:n.region_id==null,items:n.region_districts,modelValue:d.city_id,"onUpdate:modelValue":s[3]||(s[3]=f=>d.city_id=f),label:"Shahar (Tuman)","item-title":"name",loading:n.city_loading,"item-value":f=>f.id,rules:l(N)},null,8,["disabled","items","modelValue","loading","item-value","rules"])]),_:1})]),_:1},8,["loading"])]),_:1},8,["modelValue"])]),_:1})}}}),ee=$({__name:"TheHeader",setup(V){const _=S();return(a,c)=>(r(),U("header",null,[t(K),t(W),a.$route.meta.clear!=!0&&l(_).isPassenger==!1?(r(),m(Z,{key:0})):y("",!0)]))}}),te=g("span",{style:{width:"88px"},class:"tw-leading-none"},"Mening qatnovlarim",-1),ne=g("span",{style:{width:"88px"},class:"tw-leading-none"},"Qatnovlar",-1),oe=g("span",{style:{width:"88px"},class:"tw-leading-none"},"Yo'lovchilar",-1),ae={key:0,style:{width:"88px"},class:"tw-leading-none"},ie={key:1,style:{width:"88px"},class:"tw-leading-none"},le=$({__name:"TheBottomNavigation",setup(V){const _=S();return(a,c)=>{const u=o("v-icon"),n=o("v-btn"),d=o("v-bottom-navigation");return r(),m(d,{color:"primary",class:"text-center"},{default:e(()=>[l(_).isDriver?(r(),m(n,{key:0,to:{name:"car-rides-auth-user"}},{default:e(()=>[t(u,null,{default:e(()=>[p("mdi-taxi")]),_:1}),te]),_:1})):y("",!0),t(n,{to:{name:"car-rides"}},{default:e(()=>[t(u,null,{default:e(()=>[p("mdi-timeline-clock-outline")]),_:1}),ne]),_:1}),l(_).isPassengerAdmins?(r(),m(n,{key:1,to:{name:"passengers"}},{default:e(()=>[t(u,null,{default:e(()=>[p("mdi-human-greeting")]),_:1}),oe]),_:1})):y("",!0),l(_).isDriverAdmins?(r(),m(n,{key:2,to:{name:"transports"}},{default:e(()=>[t(u,null,{default:e(()=>[p("mdi-train-car")]),_:1}),l(_).isDriverAdmins?(r(),U("span",ae," Transportlar ")):(r(),U("span",ie," Mening transportim "))]),_:1})):y("",!0)]),_:1})}}}),se={class:"px-5 py-3 text-center elevation-1 position-relative"},re={class:"mb-1"},ce={class:"text-pink"},de=$({__name:"TheAlert",setup(V){const _=M(null),a=D();function c(){a.dialog.cancel()}function u(){a.dialog.submitInner()}function n(){setTimeout(()=>_.value.$el.focus())}return(d,v)=>{const k=o("v-icon"),h=o("v-card-text"),i=o("v-spacer"),s=o("v-btn"),C=o("v-card-actions"),B=o("v-card"),b=o("v-form"),x=o("v-dialog");return r(),m(x,{width:"400",modelValue:l(a).dialog.model,"onUpdate:modelValue":v[2]||(v[2]=w=>l(a).dialog.model=w)},{default:e(()=>[t(b,{onSubmit:v[1]||(v[1]=R(w=>c(),["prevent"])),onVnodeMounted:n,onVnodeUnmounted:l(a).dialog.reset},{default:e(()=>[t(B,null,{default:e(()=>[g("main",se,[g("div",re,[t(k,{color:"primary",size:"40"},{default:e(()=>[p(T(l(a).dialog.icon),1)]),_:1})]),g("span",ce,T(l(a).dialog.title),1)]),t(h,{class:"bg-grey-lighten-4"},{default:e(()=>[p(T(l(a).dialog.subTitle),1)]),_:1}),t(C,{class:"bg-grey-lighten-4"},{default:e(()=>[t(i),t(s,{text:"Yoq",ref_key:"btnCalcel",ref:_,color:"primary",variant:"tonal",type:"submit",class:"",onClick:v[0]||(v[0]=w=>l(a).dialog.model=!1)},null,512),t(s,{text:"Ha",type:"button",color:"gray",variant:"tonal",onClick:u})]),_:1})]),_:1})]),_:1},8,["onVnodeUnmounted"])]),_:1},8,["modelValue"])}}}),ue=$({__name:"General",setup(V){return(_,a)=>{const c=o("router-view"),u=o("v-container"),n=o("v-main"),d=o("v-app");return r(),m(d,{class:"bg-grey-lighten-4"},{default:e(()=>[t(de),t(n,null,{default:e(()=>[t(ee),t(u,{class:"h-100"},{default:e(()=>[t(c,{class:"h-100 position-relative mx-n2"})]),_:1})]),_:1}),t(le)]),_:1})}}});export{ue as default};
