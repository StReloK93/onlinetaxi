import{d as w,r as i,o as y,c as x,w as r,f as l,g as h,t as N,h as f,l as R,p as v,j as V,v as T,i as U,e as b}from"./app-ffab9f92.js";import{_ as $}from"./IconRenderer.vue_vue_type_script_setup_true_lang-662e51d3.js";import{r as g}from"./constants-68fdd4d6.js";const B=w({__name:"TrunkRenderer",props:["params"],setup(_){const{params:m}=_,o=m.color==null?"primary":m.color;return(u,c)=>{const t=i("v-tooltip"),s=i("v-icon"),a=i("v-btn");return _.params.data.trunk?(y(),x(a,{key:0,color:f(o),density:"compact",variant:"text"},{default:r(()=>[l(t,{activator:"parent",location:"bottom"},{default:r(()=>[h(" Bagaj bor ")]),_:1}),l(s,null,{default:r(()=>[h(N(_.params.icon),1)]),_:1})]),_:1},8,["color"])):R("",!0)}}}),k=w({__name:"Inputs",setup(_,{expose:m}){const o=v({user_id:null,type:null,number:null,color:null,fuel_type:null,trunk:!1}),u=v({fuel_types:[],users:[],start_loading:!1,end_loading:!1,start_districts:[],end_districts:[]});return axios.all([axios.get("fuel_type"),axios.get("users")]).then(axios.spread(({data:c},{data:t})=>{u.fuel_types=c,u.users=t})),m({formData:o}),(c,t)=>{const s=i("v-autocomplete"),a=i("v-col"),p=i("v-text-field"),d=i("v-switch"),n=i("v-row");return y(),x(n,null,{default:r(()=>[l(a,{sm:"6",cols:"12"},{default:r(()=>[l(s,{items:u.users,modelValue:o.user_id,"onUpdate:modelValue":t[0]||(t[0]=e=>o.user_id=e),label:"Foydalanuvchi","item-title":"phone","item-value":e=>e.id,rules:f(g)},null,8,["items","modelValue","item-value","rules"])]),_:1}),l(a,{sm:"6",cols:"12"},{default:r(()=>[l(p,{modelValue:o.type,"onUpdate:modelValue":t[1]||(t[1]=e=>o.type=e),step:900,label:"Transport turi",rules:f(g)},null,8,["modelValue","rules"])]),_:1}),l(a,{sm:"6",cols:"12"},{default:r(()=>[l(p,{modelValue:o.number,"onUpdate:modelValue":t[2]||(t[2]=e=>o.number=e),step:900,label:"Transport raqami",rules:f(g)},null,8,["modelValue","rules"])]),_:1}),l(a,{sm:"6",cols:"12"},{default:r(()=>[l(p,{modelValue:o.color,"onUpdate:modelValue":t[3]||(t[3]=e=>o.color=e),step:900,label:"Transport rangi",rules:f(g)},null,8,["modelValue","rules"])]),_:1}),l(a,{sm:"6",cols:"12"},{default:r(()=>[l(s,{items:u.fuel_types,modelValue:o.fuel_type,"onUpdate:modelValue":t[4]||(t[4]=e=>o.fuel_type=e),label:"Yoqilg'i turi","item-title":"name","item-value":e=>e.id,rules:f(g)},null,8,["items","modelValue","item-value","rules"])]),_:1}),l(a,{sm:"6",cols:"12"},{default:r(()=>[l(d,{modelValue:o.trunk,"onUpdate:modelValue":t[5]||(t[5]=e=>o.trunk=e),label:"Bagaj"},null,8,["modelValue"])]),_:1})]),_:1})}}}),A=w({__name:"Add",emits:["create"],setup(_,{emit:m}){const o=m,u=V(),c=v({dialog:!1});async function t(){const s=u.value.formData;await axios.post("car",s).then(({data:a})=>{o("create",a)})}return(s,a)=>{const p=i("v-btn"),d=i("CustomForm"),n=i("v-dialog");return y(),x(n,{modelValue:c.dialog,"onUpdate:modelValue":a[1]||(a[1]=e=>c.dialog=e),scrollable:"",persistent:"",width:"600px"},{activator:r(({props:e})=>[l(p,T({color:"primary"},e,{icon:"mdi-plus",class:"add-button"}),null,16)]),default:r(()=>[l(d,{submit:t,title:"Transport kiritish",onClose:a[0]||(a[0]=e=>c.dialog=!1)},{default:r(()=>[l(k,{ref_key:"inputComponent",ref:u},null,512)]),_:1})]),_:1},8,["modelValue"])}}}),F=w({__name:"Edit",emits:["update"],setup(_,{expose:m,emit:o}){const u=V(),c=o,t=v({dialog:!1,car_ride:null});async function s(){const d=u.value.formData;await axios.put(`car/${t.car_ride.id}`,d).then(({data:n})=>c("update",n))}function a(d){axios.get(`car/${d}`).then(({data:n})=>{const e=u.value.formData;e.user_id=n.user_id,e.type=n.type,e.number=n.number,e.color=n.color,e.fuel_type=n.fuel_type,e.trunk=!!n.trunk})}return m({toggle:d=>{t.dialog=!0,t.car_ride=d,a(d.id)}}),(d,n)=>{const e=i("CustomForm"),D=i("v-dialog");return y(),x(D,{modelValue:t.dialog,"onUpdate:modelValue":n[1]||(n[1]=C=>t.dialog=C),scrollable:"",persistent:"",width:"600px"},{default:r(()=>[l(e,{submit:s,title:"Transportni tahrirlash",onClose:n[0]||(n[0]=C=>t.dialog=!1)},{default:r(()=>[l(k,{ref_key:"inputComponent",ref:u},null,512)]),_:1})]),_:1},8,["modelValue"])}}}),j={class:"d-flex tw-flex-col"},q={class:"d-flex align-center justify-space-between mb-2"},I=b("nav",null,null,-1),z=w({__name:"Transports",setup(_){const m=V(),o=v({cars:null,gridApi:null,rowClass:["tw-max-h-14","bg-white","tw-shadow"]}),u=[{field:"type",headerName:"Turi",width:150},{field:"number",headerName:"Raqami",width:150},{field:"color",headerName:"Rangi",width:150},{field:"fuel.name",headerName:"Yoqilg'i turi",width:150},{field:"trunk",headerName:"Bagaj",minWidth:150,flex:1,cellRenderer:B,cellRendererParams:{icon:"mdi-bag-suitcase"}},{cellClass:["d-flex","justify-center","align-center","px-2","hover:tw-bg-gray-100"],headerName:"",width:60,cellRenderer:$,cellRendererParams:{icon:"mdi-pencil-outline"},headerClass:["px-2"],onCellClicked:({data:s})=>{m.value.toggle(s)}}];function c(s){o.gridApi.applyTransaction({add:[s],addIndex:0})}function t(s){o.gridApi.getRowNode(s.id).setData(s)}return axios.get("cars/get_only_my").then(({data:s})=>o.cars=s),(s,a)=>{const p=i("AgGridVue"),d=i("v-spacer");return y(),U("main",j,[b("div",null,[b("main",q,[I,l(A,{onCreate:c}),l(F,{onUpdate:t,ref_key:"editComponent",ref:m},null,512)])]),l(d,null,{default:r(()=>[l(p,{class:"ag-theme-ruzzifer ag-theme-alpine h-100",rowHeight:58,rowClass:o.rowClass,columnDefs:u,rowData:o.cars,rowSelection:"multiple",onGridReady:a[0]||(a[0]=n=>o.gridApi=n.api),getRowId:({data:n})=>n.id},null,8,["rowClass","rowData","getRowId"])]),_:1})])}}});export{z as default};
