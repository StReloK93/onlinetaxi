import{d as x,p as V,r as _,o as y,c as C,w as i,f as l,h as g,g as U,j as $,v as D}from"./app-ffab9f92.js";import{r as c}from"./constants-68fdd4d6.js";const k=x({__name:"Inputs",setup(w,{expose:f}){const o=V({car_ride_id:null,name:null,loading:null,phone:null,address:null,start_region:null,start_city:null,end_region:null,end_city:null,with_trunk:!1,ride_time:null,count:1}),a=V({start_loading:!1,end_loading:!1,regions:[],start_districts:[],end_districts:[]});async function p(u,e){a[`${e}_loading`]=!0,a[`${e}_districts`]=[],o[`${e}_city`]=null,await axios.get(`district/${u}`).then(({data:d})=>{a[`${e}_districts`]=d,a[`${e}_loading`]=!1})}return axios.get("region").then(({data:u})=>a.regions=u),f({regionChanged:p,formData:o}),(u,e)=>{const d=_("v-text-field"),r=_("v-col"),m=_("v-label"),n=_("v-autocomplete"),s=_("v-divider"),b=_("v-switch"),v=_("v-row");return y(),C(v,null,{default:i(()=>[l(r,{sm:"6",cols:"12"},{default:i(()=>[l(d,{modelValue:o.name,"onUpdate:modelValue":e[0]||(e[0]=t=>o.name=t),step:900,label:"F.I.SH",rules:g(c)},null,8,["modelValue","rules"])]),_:1}),l(r,{sm:"6",cols:"12"},{default:i(()=>[l(d,{modelValue:o.phone,"onUpdate:modelValue":e[1]||(e[1]=t=>o.phone=t),step:900,label:"Telefon raqami",rules:g(c)},null,8,["modelValue","rules"])]),_:1}),l(r,{cols:"12",class:"py-0 text-center"},{default:i(()=>[l(m,{class:"text-caption"},{default:i(()=>[U(" Boshlangich manzil (Qaerdan?) ")]),_:1})]),_:1}),l(r,{sm:"6",cols:"12"},{default:i(()=>[l(n,{"onUpdate:modelValue":[e[2]||(e[2]=t=>p(t,"start")),e[3]||(e[3]=t=>o.start_region=t)],items:a.regions,modelValue:o.start_region,label:"Viloyat","item-title":"name","item-value":t=>t.id,rules:g(c)},null,8,["items","modelValue","item-value","rules"])]),_:1}),l(r,{sm:"6",cols:"12"},{default:i(()=>[l(n,{disabled:o.start_region==null,items:a.start_districts,modelValue:o.start_city,"onUpdate:modelValue":e[4]||(e[4]=t=>o.start_city=t),label:"Shahar (Tuman)","item-title":"name",loading:a.start_loading,"item-value":t=>t.id,rules:g(c)},null,8,["disabled","items","modelValue","loading","item-value","rules"])]),_:1}),l(s,{class:"border-opacity-75"}),l(r,{cols:"12",class:"py-0 text-center"},{default:i(()=>[l(m,{class:"text-caption"},{default:i(()=>[U(" Boriladigan manzil (Qaerga?) ")]),_:1})]),_:1}),l(r,{sm:"6",cols:"12"},{default:i(()=>[l(n,{"onUpdate:modelValue":[e[5]||(e[5]=t=>p(t,"end")),e[6]||(e[6]=t=>o.end_region=t)],items:a.regions,modelValue:o.end_region,label:"Viloyat","item-title":"name","item-value":t=>t.id,rules:g(c)},null,8,["items","modelValue","item-value","rules"])]),_:1}),l(r,{sm:"6",cols:"12"},{default:i(()=>[l(n,{disabled:o.end_region==null,items:a.end_districts,modelValue:o.end_city,"onUpdate:modelValue":e[7]||(e[7]=t=>o.end_city=t),label:"Shahar (Tuman)","item-title":"name","item-value":t=>t.id,loading:a.end_loading,rules:g(c)},null,8,["disabled","items","modelValue","item-value","loading","rules"])]),_:1}),l(s,{class:"border-opacity-75"}),l(r,{sm:"6",cols:"12"},{default:i(()=>[l(d,{modelValue:o.address,"onUpdate:modelValue":e[8]||(e[8]=t=>o.address=t),step:900,label:"Manzil",rules:g(c)},null,8,["modelValue","rules"])]),_:1}),l(r,{sm:"6",cols:"12"},{default:i(()=>[l(b,{modelValue:o.with_trunk,"onUpdate:modelValue":e[9]||(e[9]=t=>o.with_trunk=t),label:"Bagaj"},null,8,["modelValue"])]),_:1}),l(r,{sm:"6",cols:"12"},{default:i(()=>[l(d,{modelValue:o.ride_time,"onUpdate:modelValue":e[10]||(e[10]=t=>o.ride_time=t),type:"datetime-local",step:900,label:"Qatnov vaqti",rules:g(c)},null,8,["modelValue","rules"])]),_:1}),l(r,{sm:"6",cols:"12"},{default:i(()=>[l(d,{modelValue:o.count,"onUpdate:modelValue":e[11]||(e[11]=t=>o.count=t),label:"Necha kishi",rules:g(c)},null,8,["modelValue","rules"])]),_:1})]),_:1})}}}),B=x({__name:"Add",emits:["create"],setup(w,{emit:f}){const o=f,a=$(),p=V({dialog:!1});async function u(){const e=a.value.formData;await axios.post("passenger",e).then(({data:d})=>{o("create",d)})}return(e,d)=>{const r=_("v-btn"),m=_("CustomForm"),n=_("v-dialog");return y(),C(n,{modelValue:p.dialog,"onUpdate:modelValue":d[1]||(d[1]=s=>p.dialog=s),scrollable:"",persistent:"",width:"600px"},{activator:i(({props:s})=>[l(r,D({color:"primary"},s,{icon:"mdi-plus",class:"add-button"}),null,16)]),default:i(()=>[l(m,{submit:u,title:"Yo'lovchi kiritish",onClose:d[0]||(d[0]=s=>p.dialog=!1)},{default:i(()=>[l(k,{ref_key:"inputComponent",ref:a},null,512)]),_:1})]),_:1},8,["modelValue"])}}}),T=x({__name:"Edit",emits:["update"],setup(w,{expose:f,emit:o}){const a=$(),p=o,u=V({dialog:!1,passenger:null});async function e(){const m=a.value.formData;await axios.put(`passenger/${u.passenger.id}`,m).then(({data:n})=>p("update",n))}function d(m){axios.get(`passenger/${m}`).then(({data:n})=>{const s=a.value.formData;s.name=n.name,s.phone=n.phone,s.start_region=n.start.region_id,s.end_region=n.end.region_id,s.ride_time=n.ride_time,s.with_trunk=!!n.with_trunk,a.value.regionChanged(s.start_region,"start").then(()=>s.start_city=n.start_city),a.value.regionChanged(s.end_region,"end").then(()=>s.end_city=n.end_city)})}return f({toggle:m=>{u.dialog=!0,u.passenger=m,d(m.id)}}),(m,n)=>{const s=_("CustomForm"),b=_("v-dialog");return y(),C(b,{modelValue:u.dialog,"onUpdate:modelValue":n[1]||(n[1]=v=>u.dialog=v),scrollable:"",persistent:"",width:"600px"},{default:i(()=>[l(s,{submit:e,title:"Yo'lovchini tahrirlash",onClose:n[0]||(n[0]=v=>u.dialog=!1)},{default:i(()=>[l(k,{ref_key:"inputComponent",ref:a},null,512)]),_:1})]),_:1},8,["modelValue"])}}});export{T as _,B as a};
