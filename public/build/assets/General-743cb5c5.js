import{d as $,u as Y,a as S,b as D,c as Q,r as T,i as E,e as a,o as c,f as u,w as t,g as f,h as o,j as m,k as l,l as b,t as z,m as N,n as q,p as P,q as B,s as R,F as G,v as L,x as O,y as J,T as K,z as W}from"./app-cf917042.js";const X={class:"d-flex align-center py-4 px-2 bg-grey-lighten-4"},Z={class:"font-weight-bold text-h6 leading-none mt-2"},ee={class:"text-caption text-blue-grey-lighten-1"},te={class:"pa-2"},oe={class:"pa-2"},ne=$({__name:"TheLeftNavigator",setup(C){const{name:p}=Y(),i=S(),n=D(),d=Q(),e=T(!1);async function _(s){n.user.role_id!=s&&(e.value=!0,await n.changeRole(s),s==3&&d.push({name:"passengers"}),s==4&&d.push({name:"car-rides"}),e.value=!1)}function v(s){return n.user.role_id==s?"primary":"grey-lighten-4"}const k=E("deferredPrompt");function V(){const s=S();s.dialog.open(()=>{s.dialog.title="Dasturdan chiqmoqchimisiz ?",s.dialog.submit=()=>n.logout()})}function y(){k&&(k.value.prompt(),k.value.userChoice.then(s=>{s.outcome==="accepted"?console.log("user accepted A2HS prompt"):console.log("user dismissed A2HS prompt"),k.value=null}))}return(s,r)=>{const h=a("v-icon"),A=a("v-divider"),x=a("v-btn"),w=a("v-col"),U=a("v-row"),F=a("v-list-item"),g=a("v-list"),j=a("v-navigation-drawer");return c(),u(j,{temporary:l(p)=="sm",modelValue:l(i).menu,"onUpdate:modelValue":r[2]||(r[2]=M=>l(i).menu=M)},{append:t(()=>[f("div",oe,[o(x,{onClick:V,block:"","append-icon":"mdi-logout"},{default:t(()=>[m(" Chiqish ")]),_:1})])]),default:t(()=>{var M,H;return[f("main",X,[l(n).isDriver?(c(),u(h,{key:0,color:"primary",size:"40"},{default:t(()=>[m("mdi-chess-knight")]),_:1})):b("",!0),l(n).isPassenger?(c(),u(h,{key:1,color:"primary",size:"40"},{default:t(()=>[m("mdi-chess-pawn")]),_:1})):b("",!0),l(n).isAdmin?(c(),u(h,{key:2,color:"primary",size:"40"},{default:t(()=>[m("mdi-chess-rook")]),_:1})):b("",!0),l(n).isSuperAdmin?(c(),u(h,{key:3,color:"primary",size:"40"},{default:t(()=>[m("mdi-chess-king")]),_:1})):b("",!0),f("aside",null,[f("div",Z,z((M=l(n).user)==null?void 0:M.name),1),f("div",ee,z((H=l(n).user)==null?void 0:H.phone),1)])]),o(A),f("div",null,[f("div",te,[l(k)?(c(),u(x,{key:0,onClick:y,block:"","append-icon":"mdi-download",variant:"tonal",class:"mb-2"},{default:t(()=>[m(" Ilovani o'rnatish ")]),_:1})):b("",!0),l(k)?(c(),u(A,{key:1})):b("",!0),l(n).isPassenger||l(n).isDriver?(c(),u(U,{key:2,class:"my-2"},{default:t(()=>[o(w,{cols:"6",class:"py-0 pr-1"},{default:t(()=>[o(x,{onClick:r[0]||(r[0]=I=>_(4)),loading:e.value,color:v(4),variant:"flat",block:""},{default:t(()=>[m(" Haydovchi ")]),_:1},8,["loading","color"])]),_:1}),o(w,{cols:"6",class:"py-0 pl-1"},{default:t(()=>[o(x,{onClick:r[1]||(r[1]=I=>_(3)),loading:e.value,color:v(3),variant:"flat",block:""},{default:t(()=>[m(" Yo'lovchi ")]),_:1},8,["loading","color"])]),_:1})]),_:1})):b("",!0),l(n).isPassenger||l(n).isDriver?(c(),u(A,{key:3})):b("",!0),o(g,{density:"compact"},{default:t(()=>[l(n).isDriverAdmins?(c(),u(F,{key:0,title:"Transportlarim","prepend-icon":"mdi-car-settings",to:{name:"user-transports"},class:"mb-2"})):b("",!0),l(n).isAnyAdmins?(c(),u(F,{key:1,"prepend-icon":"mdi-train-car",title:"Barcha Transportlar",to:{name:"transports"}})):b("",!0)]),_:1})])])]}),_:1},8,["temporary","modelValue"])}}}),ae={class:"text-right w-100 px-2"},ie=$({__name:"BaseSelectPosition",setup(C){const p=D(),i=S(),n=T(!1),d=N(()=>{var s,r;return(s=i.city)!=null&&s.name?(r=i.city)==null?void 0:r.name:"Qayerdasiz?"}),e=q({notification:!0,overlay:!1,loading:!0,city_loading:!1,regions:[],region_districts:[],region_id:null,clearButtonLoading:!1}),_=q({city_id:null,token:p.token});async function v(s){e.region_id=s,e.region_districts=[],e.city_loading=!0,_.city_id=null,await B.get(`district/${s}`).then(({data:r})=>{e.region_districts=r,e.city_loading=!1})}async function k(){e.overlay=!0,_.city_id=null,e.region_id=null;const{data:s}=await B.get("region");if(e.regions=s,i.city==null)return e.overlay=!1;v(i.city.region_id),_.city_id=i.city.id,e.overlay=!1}async function V(){e.clearButtonLoading=!0,await B.post("firebase/set-city-topic",{city_id:null,token:p.token}),i.city=null,e.clearButtonLoading=!1}async function y(){const{data:s}=await B.post("firebase/set-city-topic",_);i.city=s}return P(async()=>{B.post("firebase/get-city-topic",{token:p.token}).then(({data:s})=>{i.city=s,e.loading=!1}).catch(()=>{console.clear(),e.notification=!1,e.loading=!1})}),(s,r)=>{const h=a("v-btn"),A=a("v-icon"),x=a("v-autocomplete"),w=a("v-col"),U=a("BaseForm"),F=a("v-bottom-sheet");return c(),R(G,null,[f("div",ae,[l(i).city?(c(),u(h,{key:0,icon:"mdi-close",onClick:V,color:"white",size:"x-small",loading:e.clearButtonLoading},null,8,["loading"])):b("",!0),e.notification?(c(),u(h,{key:1,onClick:r[0]||(r[0]=g=>n.value=!0),color:"white",text:d.value,"append-icon":"mdi-map-marker",loading:e.loading},null,8,["text","loading"])):(c(),u(h,{key:2,disabled:"",color:"white"},{default:t(()=>[m("Habarnoma o'chirilgan")]),_:1}))]),o(F,{modelValue:n.value,"onUpdate:modelValue":r[5]||(r[5]=g=>n.value=g),inset:""},{default:t(()=>[o(U,{loading:e.overlay,submit:y,title:"Manzilni o'zgartirish",onClose:r[4]||(r[4]=g=>n.value=!1),onVnodeMounted:k},{default:t(()=>[f("p",null,[o(A,{color:"primary"},{default:t(()=>[m("mdi-bell-outline")]),_:1}),m(" Quyida ko'rsatgan manzilingizga qarab yo'lovchilar haqida sizga habarnoma junatamiz. ")]),o(w,{cols:"12",class:"px-0"},{default:t(()=>[o(x,{"onUpdate:modelValue":[r[1]||(r[1]=g=>v(g)),r[2]||(r[2]=g=>e.region_id=g)],items:e.regions,modelValue:e.region_id,label:"Viloyat","item-title":"name","item-value":g=>g.id,rules:l(L)},null,8,["items","modelValue","item-value","rules"])]),_:1}),o(w,{cols:"12",class:"px-0"},{default:t(()=>[o(x,{disabled:e.region_id==null,items:e.region_districts,modelValue:_.city_id,"onUpdate:modelValue":r[3]||(r[3]=g=>_.city_id=g),label:"Shahar (Tuman)","item-title":"name",loading:e.city_loading,"item-value":g=>g.id,rules:l(L)},null,8,["disabled","items","modelValue","loading","item-value","rules"])]),_:1})]),_:1},8,["loading"])]),_:1},8,["modelValue"])],64)}}}),se=$({__name:"TheAppBar",setup(C){const p=D(),i=S();return(n,d)=>{const e=a("v-app-bar-nav-icon"),_=a("v-app-bar");return c(),u(_,{density:"comfortable",elevation:0,border:1,color:"primary"},{prepend:t(()=>[o(e,{color:"white",onClick:d[0]||(d[0]=v=>l(i).menu=!l(i).menu)})]),append:t(()=>[l(p).isPassenger==!1?(c(),u(ie,{key:0})):b("",!0)]),_:1})}}}),le=$({__name:"TheHeader",setup(C){return(p,i)=>(c(),R("header",null,[o(ne),o(se)]))}}),re=f("span",{style:{width:"88px"},class:"tw-leading-none"},"Mening elonlarim",-1),ce=f("span",{style:{width:"88px"},class:"tw-leading-none"},"Haydovchi elonlari",-1),ue=f("span",{style:{width:"88px"},class:"tw-leading-none"},"Yo'lovchi elonlari",-1),de=$({__name:"TheBottomNavigation",setup(C){return D(),(p,i)=>{const n=a("v-icon"),d=a("v-btn"),e=a("v-bottom-navigation");return c(),u(e,{color:"primary",class:"text-center"},{default:t(()=>[o(d,{to:{name:"car-rides-auth-user"}},{default:t(()=>[o(n,null,{default:t(()=>[m("mdi-timeline-clock-outline")]),_:1}),re]),_:1}),o(d,{to:{name:"car-rides"}},{default:t(()=>[o(n,null,{default:t(()=>[m("mdi-taxi")]),_:1}),ce]),_:1}),o(d,{to:{name:"passengers"}},{default:t(()=>[o(n,null,{default:t(()=>[m("mdi-human-greeting")]),_:1}),ue]),_:1})]),_:1})}}}),_e={class:"px-5 py-3 text-center elevation-1 position-relative"},me={class:"mb-1"},pe={class:"text-pink"},ve=$({__name:"TheAlert",setup(C){const p=T(null),i=S();function n(){i.dialog.cancel()}function d(){i.dialog.submitInner()}function e(){setTimeout(()=>p.value.$el.focus())}return(_,v)=>{const k=a("v-icon"),V=a("v-card-text"),y=a("v-spacer"),s=a("v-btn"),r=a("v-card-actions"),h=a("v-card"),A=a("v-form"),x=a("v-dialog");return c(),u(x,{width:"400",modelValue:l(i).dialog.model,"onUpdate:modelValue":v[2]||(v[2]=w=>l(i).dialog.model=w)},{default:t(()=>[o(A,{onSubmit:v[1]||(v[1]=O(w=>n(),["prevent"])),onVnodeMounted:e,onVnodeUnmounted:l(i).dialog.reset},{default:t(()=>[o(h,null,{default:t(()=>[f("main",_e,[f("div",me,[o(k,{color:"primary",size:"40"},{default:t(()=>[m(z(l(i).dialog.icon),1)]),_:1})]),f("span",pe,z(l(i).dialog.title),1)]),o(V,{class:"bg-grey-lighten-4"},{default:t(()=>[m(z(l(i).dialog.subTitle),1)]),_:1}),o(r,{class:"bg-grey-lighten-4"},{default:t(()=>[o(y),o(s,{text:"Yoq",ref_key:"btnCalcel",ref:p,color:"primary",variant:"tonal",type:"submit",class:"",onClick:v[0]||(v[0]=w=>l(i).dialog.model=!1)},null,512),o(s,{text:"Ha",type:"button",color:"gray",variant:"tonal",onClick:d})]),_:1})]),_:1})]),_:1},8,["onVnodeUnmounted"])]),_:1},8,["modelValue"])}}}),ge=$({__name:"FormAdd-TransportForce",setup(C){const p=D(),i=T(),n=q({overlay:!1}),d=T([]),e=T(!1),_=N(()=>p.isDriverAdmins?d.value.length==0:!1),v=J();async function k(){const V=i.value.formData,y=await v.create(V);d.value.push(y)}return P(async()=>{d.value=await K.onlyAuthUser(),e.value=!0}),(V,y)=>{const s=a("BaseForm"),r=a("v-dialog");return e.value?(c(),u(r,{key:0,modelValue:_.value,"onUpdate:modelValue":y[2]||(y[2]=h=>_.value=h),scrollable:"",width:"600px"},{default:t(()=>[o(s,{loading:n.overlay,submit:k,title:"Transport kiritish"},{default:t(()=>[o(l(W),{onVnodeMounted:y[0]||(y[0]=h=>n.overlay=!0),onOnReady:y[1]||(y[1]=h=>n.overlay=!1),ref_key:"inputComponent",ref:i},null,512)]),_:1},8,["loading"])]),_:1},8,["modelValue"])):b("",!0)}}}),ye=$({__name:"General",setup(C){return(p,i)=>{const n=a("router-view"),d=a("v-container"),e=a("v-main"),_=a("v-app");return c(),u(_,{class:"bg-grey-lighten-4"},{default:t(()=>[o(ge),o(ve),o(e,null,{default:t(()=>[o(le),o(d,{class:"h-100 pb-3"},{default:t(()=>[o(n,{class:"h-100 position-relative mx-n2"})]),_:1})]),_:1}),o(de)]),_:1})}}});export{ye as default};
