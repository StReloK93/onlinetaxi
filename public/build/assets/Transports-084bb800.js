import{d as w,r as i,o as x,c as b,w as r,f as l,g as k,t as N,h as g,i as R,b as T,p as v,k as h,v as $,j as A,e as V}from"./app-1c89fd55.js";import{_ as B}from"./IconRenderer.vue_vue_type_script_setup_true_lang-434d1039.js";import{r as y}from"./constants-68fdd4d6.js";const U=w({__name:"TrunkRenderer",props:["params"],setup(f){const{params:p}=f,u=p.color==null?"primary":p.color;return(t,c)=>{const n=i("v-tooltip"),e=i("v-icon"),a=i("v-btn");return f.params.data.trunk?(x(),b(a,{key:0,color:g(u),density:"compact",variant:"text"},{default:r(()=>[l(n,{activator:"parent",location:"bottom"},{default:r(()=>[k(" Bagaj bor ")]),_:1}),l(e,null,{default:r(()=>[k(N(f.params.icon),1)]),_:1})]),_:1},8,["color"])):R("",!0)}}}),D=w({__name:"Inputs",setup(f,{expose:p}){const u=T(),t=v({user_id:u.user.id,type:null,number:null,color:null,fuel_type:null,trunk:!1}),c=v({fuel_types:[],users:[],start_loading:!1,end_loading:!1,start_districts:[],end_districts:[]});return axios.all([axios.get("fuel_type"),axios.get("users")]).then(axios.spread(({data:n},{data:e})=>{c.fuel_types=n,c.users=e})),p({formData:t}),(n,e)=>{const a=i("v-text-field"),_=i("v-col"),d=i("v-autocomplete"),o=i("v-switch"),s=i("v-row");return x(),b(s,null,{default:r(()=>[l(_,{sm:"6",cols:"12"},{default:r(()=>[l(a,{modelValue:t.type,"onUpdate:modelValue":e[0]||(e[0]=m=>t.type=m),step:900,label:"Transport turi",rules:g(y)},null,8,["modelValue","rules"])]),_:1}),l(_,{sm:"6",cols:"12"},{default:r(()=>[l(a,{modelValue:t.number,"onUpdate:modelValue":e[1]||(e[1]=m=>t.number=m),step:900,label:"Transport raqami",rules:g(y)},null,8,["modelValue","rules"])]),_:1}),l(_,{sm:"6",cols:"12"},{default:r(()=>[l(a,{modelValue:t.color,"onUpdate:modelValue":e[2]||(e[2]=m=>t.color=m),step:900,label:"Transport rangi",rules:g(y)},null,8,["modelValue","rules"])]),_:1}),l(_,{sm:"6",cols:"12"},{default:r(()=>[l(d,{items:c.fuel_types,modelValue:t.fuel_type,"onUpdate:modelValue":e[3]||(e[3]=m=>t.fuel_type=m),label:"Yoqilg'i turi","item-title":"name","item-value":m=>m.id,rules:g(y)},null,8,["items","modelValue","item-value","rules"])]),_:1}),l(_,{sm:"6",cols:"12"},{default:r(()=>[l(o,{modelValue:t.trunk,"onUpdate:modelValue":e[4]||(e[4]=m=>t.trunk=m),label:"Bagaj",class:"px-2"},null,8,["modelValue"])]),_:1})]),_:1})}}}),j=w({__name:"Add",emits:["create"],setup(f,{emit:p}){const u=p,t=h(),c=v({dialog:!1});async function n(){const e=t.value.formData;await axios.post("car",e).then(({data:a})=>{u("create",a)})}return(e,a)=>{const _=i("v-btn"),d=i("CustomForm"),o=i("v-dialog");return x(),b(o,{modelValue:c.dialog,"onUpdate:modelValue":a[1]||(a[1]=s=>c.dialog=s),scrollable:"",persistent:"",width:"600px"},{activator:r(({props:s})=>[l(_,$({color:"primary"},s,{icon:"mdi-plus",class:"add-button"}),null,16)]),default:r(()=>[l(d,{submit:n,title:"Transport kiritish",onClose:a[0]||(a[0]=s=>c.dialog=!1)},{default:r(()=>[l(D,{ref_key:"inputComponent",ref:t},null,512)]),_:1})]),_:1},8,["modelValue"])}}}),F=w({__name:"Edit",emits:["update"],setup(f,{expose:p,emit:u}){const t=h(),c=u,n=v({dialog:!1,car_ride:null});async function e(){const d=t.value.formData;await axios.put(`car/${n.car_ride.id}`,d).then(({data:o})=>c("update",o))}function a(d){axios.get(`car/${d}`).then(({data:o})=>{const s=t.value.formData;s.user_id=o.user_id,s.type=o.type,s.number=o.number,s.color=o.color,s.fuel_type=o.fuel_type,s.trunk=!!o.trunk})}return p({toggle:d=>{n.dialog=!0,n.car_ride=d,a(d.id)}}),(d,o)=>{const s=i("CustomForm"),m=i("v-dialog");return x(),b(m,{modelValue:n.dialog,"onUpdate:modelValue":o[1]||(o[1]=C=>n.dialog=C),scrollable:"",persistent:"",width:"600px"},{default:r(()=>[l(s,{submit:e,title:"Transportni tahrirlash",onClose:o[0]||(o[0]=C=>n.dialog=!1)},{default:r(()=>[l(D,{ref_key:"inputComponent",ref:t},null,512)]),_:1})]),_:1},8,["modelValue"])}}}),q={class:"d-flex tw-flex-col"},I={class:"d-flex align-center justify-space-between mb-2"},E=V("nav",null,null,-1),z=w({__name:"Transports",setup(f){const p=h(),u=v({cars:null,gridApi:null,rowClass:["tw-max-h-14","bg-white","tw-shadow"]}),t=[{field:"type",headerName:"Turi",width:150},{field:"number",headerName:"Raqami",width:150},{field:"color",headerName:"Rangi",width:150},{field:"fuel.name",headerName:"Yoqilg'i turi",width:150},{field:"trunk",headerName:"Bagaj",minWidth:150,flex:1,cellRenderer:U,cellRendererParams:{icon:"mdi-bag-suitcase"}},{cellClass:["d-flex","justify-center","align-center","px-2","hover:tw-bg-gray-100"],headerName:"",width:60,cellRenderer:B,cellRendererParams:{icon:"mdi-pencil-outline"},headerClass:["px-2"],onCellClicked:({data:e})=>{p.value.toggle(e)}}];function c(e){u.gridApi.applyTransaction({add:[e],addIndex:0})}function n(e){u.gridApi.getRowNode(e.id).setData(e)}return axios.get("cars/get_only_my").then(({data:e})=>u.cars=e),(e,a)=>{const _=i("AgGridVue"),d=i("v-spacer");return x(),A("main",q,[V("div",null,[V("main",I,[E,l(j,{onCreate:c}),l(F,{onUpdate:n,ref_key:"editComponent",ref:p},null,512)])]),l(d,null,{default:r(()=>[l(_,{class:"ag-theme-ruzzifer ag-theme-alpine h-100",rowHeight:58,rowClass:u.rowClass,columnDefs:t,rowData:u.cars,rowSelection:"multiple",onGridReady:a[0]||(a[0]=o=>u.gridApi=o.api),getRowId:({data:o})=>o.id},null,8,["rowClass","rowData","getRowId"])]),_:1})])}}});export{z as default};
