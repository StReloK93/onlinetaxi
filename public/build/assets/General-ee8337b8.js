import{d as $,u as I,a as z,b as S,r as T,i as Q,c as n,o as _,e as g,w as e,f,g as t,h as y,t as B,j as i,k,l as q,m as P,n as L,p as R,q as D,s as H,v as Y,x as E,T as G,F as O}from"./app-e22af7c5.js";const J={class:"d-flex align-center py-4 px-2 bg-grey-lighten-4"},K={class:"font-weight-bold text-h6 leading-none mt-2"},W={class:"text-caption text-blue-grey-lighten-1"},X={class:"pa-2"},Z={key:0},ee={key:1},te={class:"pa-2"},oe=$({__name:"TheLeftNavigator",setup(A){const{name:p}=I(),a=z(),s=S(),u=T(!1);async function o(l){s.user.role_id!=l&&(u.value=!0,await s.changeRole(l),u.value=!1)}function d(l){return s.user.role_id==l?"primary":"grey-lighten-4"}const m=Q("deferredPrompt");function x(){const l=z();l.dialog.open(()=>{l.dialog.title="Dasturdan chiqmoqchimisiz ?",l.dialog.submit=()=>s.logout()})}function h(){m&&(m.value.prompt(),m.value.userChoice.then(l=>{l.outcome==="accepted"?console.log("user accepted A2HS prompt"):console.log("user dismissed A2HS prompt"),m.value=null}))}return(l,r)=>{const c=n("v-icon"),b=n("v-divider"),w=n("v-btn"),C=n("v-col"),V=n("v-row"),F=n("v-list-item"),M=n("v-list"),U=n("v-navigation-drawer");return _(),g(U,{temporary:i(p)=="sm",modelValue:i(a).menu,"onUpdate:modelValue":r[2]||(r[2]=v=>i(a).menu=v)},{append:e(()=>[f("div",te,[t(w,{onClick:x,block:"","append-icon":"mdi-logout"},{default:e(()=>[y(" Chiqish ")]),_:1})])]),default:e(()=>{var v,N;return[f("main",J,[t(c,{color:"primary",size:"40"},{default:e(()=>[y("mdi-vuetify")]),_:1}),f("aside",null,[f("div",K,B((v=i(s).user)==null?void 0:v.name),1),f("div",W,B((N=i(s).user)==null?void 0:N.phone),1)])]),t(b),f("div",null,[f("div",X,[i(m)?(_(),g(w,{key:0,onClick:h,block:"","append-icon":"mdi-download",variant:"tonal",class:"mb-2"},{default:e(()=>[y(" Ilovani o'rnatish ")]),_:1})):k("",!0),t(b),i(s).isPassenger||i(s).isDriver?(_(),g(V,{key:1,class:"mb-2 mt-2"},{default:e(()=>[t(C,{cols:"6",class:"py-0 pr-1"},{default:e(()=>[t(w,{onClick:r[0]||(r[0]=j=>o(4)),loading:u.value,color:d(4),variant:"flat",block:""},{default:e(()=>[y(" Haydovchi ")]),_:1},8,["loading","color"])]),_:1}),t(C,{cols:"6",class:"py-0 pl-1"},{default:e(()=>[t(w,{onClick:r[1]||(r[1]=j=>o(3)),loading:u.value,color:d(3),variant:"flat",block:""},{default:e(()=>[y(" Yo'lovchi ")]),_:1},8,["loading","color"])]),_:1})]),_:1})):k("",!0),t(b),t(M,{density:"compact"},{default:e(()=>[t(F,{"prepend-icon":"mdi-car-settings",to:{name:"transports"}},{title:e(()=>[i(s).isDriverAdmins?(_(),q("span",Z," Transportlar ")):(_(),q("span",ee," Mening transportlarim "))]),_:1})]),_:1})])])]}),_:1},8,["temporary","modelValue"])}}}),ne={class:"d-flex align-center"},ae=$({__name:"TheAppBar",setup(A){const p=z(),a=S();return(s,u)=>{const o=n("v-app-bar-nav-icon"),d=n("v-icon"),m=n("v-app-bar-title"),x=n("v-app-bar");return _(),g(x,{density:"comfortable",elevation:0,border:1,color:"primary"},{prepend:e(()=>[t(o,{color:"white",onClick:u[0]||(u[0]=h=>i(p).menu=!i(p).menu)})]),default:e(()=>[t(m,null,{default:e(()=>{var h,l;return[f("div",ne,[i(a).isDriver?(_(),g(d,{key:0},{default:e(()=>[y("mdi-chess-knight")]),_:1})):k("",!0),i(a).isPassenger?(_(),g(d,{key:1},{default:e(()=>[y("mdi-chess-pawn")]),_:1})):k("",!0),i(a).isAdmin?(_(),g(d,{key:2},{default:e(()=>[y("mdi-chess-rook")]),_:1})):k("",!0),i(a).isSuperAdmin?(_(),g(d,{key:3},{default:e(()=>[y("mdi-chess-king")]),_:1})):k("",!0),f("span",null,B((l=(h=i(a).user)==null?void 0:h.role)==null?void 0:l.name),1)])]}),_:1})]),_:1})}}}),ie={class:"text-right w-100 px-2"},le=$({__name:"TheLittleAppBar",setup(A){const p=S(),a=z(),s=T(!1),u=P(()=>{var r,c;return(r=a.city)!=null&&r.name?(c=a.city)==null?void 0:c.name:"Qayerdasiz?"}),o=L({notification:!0,overlay:!1,loading:!0,city_loading:!1,regions:[],region_districts:[],region_id:null,clearButtonLoading:!1}),d=L({city_id:null,token:p.token});async function m(r){o.region_id=r,o.region_districts=[],o.city_loading=!0,d.city_id=null,await D.get(`district/${r}`).then(({data:c})=>{o.region_districts=c,o.city_loading=!1})}async function x(){o.overlay=!0,d.city_id=null,o.region_id=null;const{data:r}=await D.get("region");if(o.regions=r,a.city==null)return o.overlay=!1;m(a.city.region_id),d.city_id=a.city.id,o.overlay=!1}async function h(){o.clearButtonLoading=!0,await D.post("firebase/set-city-topic",{city_id:null,token:p.token}),a.city=null,o.clearButtonLoading=!1}async function l(){const{data:r}=await D.post("firebase/set-city-topic",d);a.city=r}return R(async()=>{D.post("firebase/get-city-topic",{token:p.token}).then(({data:r})=>{a.city=r,o.loading=!1}).catch(()=>{console.clear(),o.notification=!1,o.loading=!1})}),(r,c)=>{const b=n("v-btn"),w=n("v-icon"),C=n("v-autocomplete"),V=n("v-col"),F=n("BaseForm"),M=n("v-bottom-sheet"),U=n("v-app-bar");return _(),g(U,{density:"compact",elevation:0,border:1},{default:e(()=>[f("div",ie,[i(a).city?(_(),g(b,{key:0,icon:"mdi-close",onClick:h,size:"x-small",loading:o.clearButtonLoading},null,8,["loading"])):k("",!0),o.notification?(_(),g(b,{key:1,onClick:c[0]||(c[0]=v=>s.value=!0),text:u.value,"append-icon":"mdi-map-marker",loading:o.loading},null,8,["text","loading"])):(_(),g(b,{key:2,disabled:""},{default:e(()=>[y("Habarnoma o'chirilgan")]),_:1}))]),t(M,{modelValue:s.value,"onUpdate:modelValue":c[5]||(c[5]=v=>s.value=v),inset:""},{default:e(()=>[t(F,{loading:o.overlay,submit:l,title:"Manzilni o'zgartirish",onClose:c[4]||(c[4]=v=>s.value=!1),onVnodeMounted:x},{default:e(()=>[f("p",null,[t(w,{color:"primary"},{default:e(()=>[y("mdi-bell-outline")]),_:1}),y(" Quyida ko'rsatgan manzilingizga qarab yo'lovchilar haqida sizga habarnoma junatamiz. ")]),t(V,{cols:"12",class:"px-0"},{default:e(()=>[t(C,{"onUpdate:modelValue":[c[1]||(c[1]=v=>m(v)),c[2]||(c[2]=v=>o.region_id=v)],items:o.regions,modelValue:o.region_id,label:"Viloyat","item-title":"name","item-value":v=>v.id,rules:i(H)},null,8,["items","modelValue","item-value","rules"])]),_:1}),t(V,{cols:"12",class:"px-0"},{default:e(()=>[t(C,{disabled:o.region_id==null,items:o.region_districts,modelValue:d.city_id,"onUpdate:modelValue":c[3]||(c[3]=v=>d.city_id=v),label:"Shahar (Tuman)","item-title":"name",loading:o.city_loading,"item-value":v=>v.id,rules:i(H)},null,8,["disabled","items","modelValue","loading","item-value","rules"])]),_:1})]),_:1},8,["loading"])]),_:1},8,["modelValue"])]),_:1})}}}),se=$({__name:"TheHeader",setup(A){const p=S();return(a,s)=>(_(),q("header",null,[t(oe),t(ae),a.$route.meta.clear!=!0&&i(p).isPassenger==!1?(_(),g(le,{key:0})):k("",!0)]))}}),re=f("span",{style:{width:"88px"},class:"tw-leading-none"},"Mening qatnovlarim",-1),ce=f("span",{style:{width:"88px"},class:"tw-leading-none"},"Qatnovlar",-1),de=f("span",{style:{width:"88px"},class:"tw-leading-none"},"Yo'lovchilar",-1),ue=$({__name:"TheBottomNavigation",setup(A){const p=S();return(a,s)=>{const u=n("v-icon"),o=n("v-btn"),d=n("v-bottom-navigation");return _(),g(d,{color:"primary",class:"text-center"},{default:e(()=>[i(p).isDriver?(_(),g(o,{key:0,to:{name:"car-rides-auth-user"}},{default:e(()=>[t(u,null,{default:e(()=>[y("mdi-taxi")]),_:1}),re]),_:1})):k("",!0),t(o,{to:{name:"car-rides"}},{default:e(()=>[t(u,null,{default:e(()=>[y("mdi-timeline-clock-outline")]),_:1}),ce]),_:1}),t(o,{to:{name:"passengers"}},{default:e(()=>[t(u,null,{default:e(()=>[y("mdi-human-greeting")]),_:1}),de]),_:1})]),_:1})}}}),_e={class:"px-5 py-3 text-center elevation-1 position-relative"},me={class:"mb-1"},pe={class:"text-pink"},ve=$({__name:"TheAlert",setup(A){const p=T(null),a=z();function s(){a.dialog.cancel()}function u(){a.dialog.submitInner()}function o(){setTimeout(()=>p.value.$el.focus())}return(d,m)=>{const x=n("v-icon"),h=n("v-card-text"),l=n("v-spacer"),r=n("v-btn"),c=n("v-card-actions"),b=n("v-card"),w=n("v-form"),C=n("v-dialog");return _(),g(C,{width:"400",modelValue:i(a).dialog.model,"onUpdate:modelValue":m[2]||(m[2]=V=>i(a).dialog.model=V)},{default:e(()=>[t(w,{onSubmit:m[1]||(m[1]=Y(V=>s(),["prevent"])),onVnodeMounted:o,onVnodeUnmounted:i(a).dialog.reset},{default:e(()=>[t(b,null,{default:e(()=>[f("main",_e,[f("div",me,[t(x,{color:"primary",size:"40"},{default:e(()=>[y(B(i(a).dialog.icon),1)]),_:1})]),f("span",pe,B(i(a).dialog.title),1)]),t(h,{class:"bg-grey-lighten-4"},{default:e(()=>[y(B(i(a).dialog.subTitle),1)]),_:1}),t(c,{class:"bg-grey-lighten-4"},{default:e(()=>[t(l),t(r,{text:"Yoq",ref_key:"btnCalcel",ref:p,color:"primary",variant:"tonal",type:"submit",class:"",onClick:m[0]||(m[0]=V=>i(a).dialog.model=!1)},null,512),t(r,{text:"Ha",type:"button",color:"gray",variant:"tonal",onClick:u})]),_:1})]),_:1})]),_:1},8,["onVnodeUnmounted"])]),_:1},8,["modelValue"])}}}),ge=$({__name:"FormAdd-TransportForce",setup(A){const p=S(),a=T(),s=L({overlay:!1}),u=T([]),o=T(!1),d=P(()=>p.isDriverAdmins?u.value.length==0:!1),m=E();async function x(){const h=a.value.formData,l=await m.create(h);u.value.push(l)}return R(async()=>{u.value=await G.onlyAuthUser(),o.value=!0}),(h,l)=>{const r=n("BaseForm"),c=n("v-dialog");return o.value?(_(),g(c,{key:0,modelValue:d.value,"onUpdate:modelValue":l[2]||(l[2]=b=>d.value=b),scrollable:"",width:"600px"},{default:e(()=>[t(r,{loading:s.overlay,submit:x,title:"Transport kiritish"},{default:e(()=>[t(i(O),{onVnodeMounted:l[0]||(l[0]=b=>s.overlay=!0),onOnReady:l[1]||(l[1]=b=>s.overlay=!1),ref_key:"inputComponent",ref:a},null,512)]),_:1},8,["loading"])]),_:1},8,["modelValue"])):k("",!0)}}}),ye=$({__name:"General",setup(A){return(p,a)=>{const s=n("router-view"),u=n("v-container"),o=n("v-main"),d=n("v-app");return _(),g(d,{class:"bg-grey-lighten-4"},{default:e(()=>[t(ge),t(ve),t(o,null,{default:e(()=>[t(se),t(u,{class:"h-100"},{default:e(()=>[t(s,{class:"h-100 position-relative mx-n2"})]),_:1})]),_:1}),t(ue)]),_:1})}}});export{ye as default};
