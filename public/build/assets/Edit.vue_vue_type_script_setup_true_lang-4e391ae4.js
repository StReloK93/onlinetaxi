import{d as x,p as b,r as u,A as F,o as y,c as C,w as s,f as t,e as w,B as z,h as _,g as k,k as D,x as N}from"./app-f063963f.js";import{p as Q,r as g}from"./constants-68fdd4d6.js";const S={class:"d-flex w-100 mb-3"},T=w("img",{src:"/iconos/uz.png"},null,-1),U=x({__name:"Inputs",setup(h,{expose:f}){const o=b({car_ride_id:null,name:null,loading:null,phone:null,address:null,start_region:null,start_city:null,end_region:null,end_city:null,with_trunk:!1,ride_time:null,count:1}),d=b({start_loading:!1,end_loading:!1,regions:[],start_districts:[],end_districts:[]});async function p(r,e){d[`${e}_loading`]=!0,d[`${e}_districts`]=[],o[`${e}_city`]=null,await axios.get(`district/${r}`).then(({data:m})=>{d[`${e}_districts`]=m,d[`${e}_loading`]=!1})}return axios.get("region").then(({data:r})=>d.regions=r),f({regionChanged:p,formData:o}),(r,e)=>{const m=u("v-icon"),c=u("v-text-field"),a=u("v-col"),i=u("v-label"),n=u("v-autocomplete"),v=u("v-divider"),V=u("v-switch"),$=u("v-row"),B=F("maska");return y(),C($,null,{default:s(()=>[t(a,{sm:"6",cols:"12"},{default:s(()=>[w("main",S,[t(c,{class:"pr-2 flex-0-0",readonly:"",density:"compact",value:"+998",disabled:""},{"prepend-inner":s(()=>[t(m,null,{default:s(()=>[T]),_:1})]),_:1}),z(t(c,{modelValue:o.phone,"onUpdate:modelValue":e[0]||(e[0]=l=>o.phone=l),density:"compact",rules:_(g)},null,8,["modelValue","rules"]),[[B,void 0,_(Q)]])])]),_:1}),t(a,{sm:"6",cols:"12"},{default:s(()=>[t(c,{modelValue:o.name,"onUpdate:modelValue":e[1]||(e[1]=l=>o.name=l),step:900,label:"F.I.SH",rules:_(g)},null,8,["modelValue","rules"])]),_:1}),t(a,{cols:"12",class:"py-0 text-center"},{default:s(()=>[t(i,{class:"text-caption"},{default:s(()=>[k(" Boshlangich manzil (Qaerdan?) ")]),_:1})]),_:1}),t(a,{sm:"6",cols:"12"},{default:s(()=>[t(n,{"onUpdate:modelValue":[e[2]||(e[2]=l=>p(l,"start")),e[3]||(e[3]=l=>o.start_region=l)],items:d.regions,modelValue:o.start_region,label:"Viloyat","item-title":"name","item-value":l=>l.id,rules:_(g)},null,8,["items","modelValue","item-value","rules"])]),_:1}),t(a,{sm:"6",cols:"12"},{default:s(()=>[t(n,{disabled:o.start_region==null,items:d.start_districts,modelValue:o.start_city,"onUpdate:modelValue":e[4]||(e[4]=l=>o.start_city=l),label:"Shahar (Tuman)","item-title":"name",loading:d.start_loading,"item-value":l=>l.id,rules:_(g)},null,8,["disabled","items","modelValue","loading","item-value","rules"])]),_:1}),t(v,{class:"border-opacity-75"}),t(a,{cols:"12",class:"py-0 text-center"},{default:s(()=>[t(i,{class:"text-caption"},{default:s(()=>[k(" Boriladigan manzil (Qaerga?) ")]),_:1})]),_:1}),t(a,{sm:"6",cols:"12"},{default:s(()=>[t(n,{"onUpdate:modelValue":[e[5]||(e[5]=l=>p(l,"end")),e[6]||(e[6]=l=>o.end_region=l)],items:d.regions,modelValue:o.end_region,label:"Viloyat","item-title":"name","item-value":l=>l.id,rules:_(g)},null,8,["items","modelValue","item-value","rules"])]),_:1}),t(a,{sm:"6",cols:"12"},{default:s(()=>[t(n,{disabled:o.end_region==null,items:d.end_districts,modelValue:o.end_city,"onUpdate:modelValue":e[7]||(e[7]=l=>o.end_city=l),label:"Shahar (Tuman)","item-title":"name","item-value":l=>l.id,loading:d.end_loading,rules:_(g)},null,8,["disabled","items","modelValue","item-value","loading","rules"])]),_:1}),t(v,{class:"border-opacity-75"}),t(a,{sm:"6",cols:"12"},{default:s(()=>[t(c,{modelValue:o.address,"onUpdate:modelValue":e[8]||(e[8]=l=>o.address=l),step:900,label:"Yo'lovchining manzili",rules:_(g)},null,8,["modelValue","rules"])]),_:1}),t(a,{sm:"6",cols:"12"},{default:s(()=>[t(c,{modelValue:o.count,"onUpdate:modelValue":e[9]||(e[9]=l=>o.count=l),label:"Necha kishi",rules:_(g)},null,8,["modelValue","rules"])]),_:1}),t(a,{sm:"6",cols:"12"},{default:s(()=>[t(c,{modelValue:o.ride_time,"onUpdate:modelValue":e[10]||(e[10]=l=>o.ride_time=l),type:"datetime-local",step:900,label:"Qatnov vaqti",rules:_(g)},null,8,["modelValue","rules"])]),_:1}),t(a,{sm:"6",cols:"12"},{default:s(()=>[t(V,{modelValue:o.with_trunk,"onUpdate:modelValue":e[11]||(e[11]=l=>o.with_trunk=l),label:"Bagaj"},null,8,["modelValue"])]),_:1})]),_:1})}}}),I=x({__name:"Add",emits:["create"],setup(h,{emit:f}){const o=f,d=D(),p=b({dialog:!1});async function r(){const e=d.value.formData;await axios.post("passenger",e).then(({data:m})=>{o("create",m)})}return(e,m)=>{const c=u("v-btn"),a=u("CustomForm"),i=u("v-dialog");return y(),C(i,{modelValue:p.dialog,"onUpdate:modelValue":m[1]||(m[1]=n=>p.dialog=n),scrollable:"",persistent:"",width:"600px"},{activator:s(({props:n})=>[t(c,N({color:"primary"},n,{icon:"mdi-plus",class:"add-button"}),null,16)]),default:s(()=>[t(a,{submit:r,title:"Yo'lovchi kiritish",onClose:m[0]||(m[0]=n=>p.dialog=!1)},{default:s(()=>[t(U,{ref_key:"inputComponent",ref:d},null,512)]),_:1})]),_:1},8,["modelValue"])}}}),j=x({__name:"Edit",emits:["update"],setup(h,{expose:f,emit:o}){const d=D(),p=o,r=b({dialog:!1,passenger:null});async function e(){const a=d.value.formData;await axios.put(`passenger/${r.passenger.id}`,a).then(({data:i})=>p("update",i))}function m(a){axios.get(`passenger/${a}`).then(({data:i})=>{const n=d.value.formData;n.name=i.name,n.phone=i.phone,n.address=i.address,n.start_region=i.start.region_id,n.end_region=i.end.region_id,n.ride_time=i.ride_time,n.with_trunk=!!i.with_trunk,d.value.regionChanged(n.start_region,"start").then(()=>n.start_city=i.start_city),d.value.regionChanged(n.end_region,"end").then(()=>n.end_city=i.end_city)})}return f({toggle:a=>{r.dialog=!0,r.passenger=a,m(a.id)}}),(a,i)=>{const n=u("CustomForm"),v=u("v-dialog");return y(),C(v,{modelValue:r.dialog,"onUpdate:modelValue":i[1]||(i[1]=V=>r.dialog=V),scrollable:"",persistent:"",width:"600px"},{default:s(()=>[t(n,{submit:e,title:"Yo'lovchini tahrirlash",onClose:i[0]||(i[0]=V=>r.dialog=!1)},{default:s(()=>[t(U,{ref_key:"inputComponent",ref:d},null,512)]),_:1})]),_:1},8,["modelValue"])}}});export{j as _,I as a};
