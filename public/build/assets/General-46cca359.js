import{d as V,u as I,a as z,b as D,r as T,i as Y,c as a,o as u,e as p,w as t,f as y,g as e,h as v,j as l,k as b,t as S,l as M,m as P,n as H,p as R,q as B,F as Q,s as N,v as E,x as G,T as O,y as J}from"./app-fe44ee1e.js";const K={class:"d-flex align-center py-4 px-2 bg-grey-lighten-4"},W={class:"font-weight-bold text-h6 leading-none mt-2"},X={class:"text-caption text-blue-grey-lighten-1"},Z={class:"pa-2"},ee={key:0},te={key:1},oe={class:"pa-2"},ne=V({__name:"TheLeftNavigator",setup($){const{name:g}=I(),i=z(),n=D(),d=T(!1);async function o(r){n.user.role_id!=r&&(d.value=!0,await n.changeRole(r),d.value=!1)}function m(r){return n.user.role_id==r?"primary":"grey-lighten-4"}const _=Y("deferredPrompt");function C(){const r=z();r.dialog.open(()=>{r.dialog.title="Dasturdan chiqmoqchimisiz ?",r.dialog.submit=()=>n.logout()})}function k(){_&&(_.value.prompt(),_.value.userChoice.then(r=>{r.outcome==="accepted"?console.log("user accepted A2HS prompt"):console.log("user dismissed A2HS prompt"),_.value=null}))}return(r,c)=>{const s=a("v-icon"),h=a("v-divider"),x=a("v-btn"),A=a("v-col"),w=a("v-row"),U=a("v-list-item"),q=a("v-list"),f=a("v-navigation-drawer");return u(),p(f,{temporary:l(g)=="sm",modelValue:l(i).menu,"onUpdate:modelValue":c[2]||(c[2]=F=>l(i).menu=F)},{append:t(()=>[y("div",oe,[e(x,{onClick:C,block:"","append-icon":"mdi-logout"},{default:t(()=>[v(" Chiqish ")]),_:1})])]),default:t(()=>{var F,L;return[y("main",K,[l(n).isDriver?(u(),p(s,{key:0,color:"primary",size:"40"},{default:t(()=>[v("mdi-chess-knight")]),_:1})):b("",!0),l(n).isPassenger?(u(),p(s,{key:1,color:"primary",size:"40"},{default:t(()=>[v("mdi-chess-pawn")]),_:1})):b("",!0),l(n).isAdmin?(u(),p(s,{key:2,color:"primary",size:"40"},{default:t(()=>[v("mdi-chess-rook")]),_:1})):b("",!0),l(n).isSuperAdmin?(u(),p(s,{key:3,color:"primary",size:"40"},{default:t(()=>[v("mdi-chess-king")]),_:1})):b("",!0),y("aside",null,[y("div",W,S((F=l(n).user)==null?void 0:F.name),1),y("div",X,S((L=l(n).user)==null?void 0:L.phone),1)])]),e(h),y("div",null,[y("div",Z,[l(_)?(u(),p(x,{key:0,onClick:k,block:"","append-icon":"mdi-download",variant:"tonal",class:"mb-2"},{default:t(()=>[v(" Ilovani o'rnatish ")]),_:1})):b("",!0),e(h),l(n).isPassenger||l(n).isDriver?(u(),p(w,{key:1,class:"mb-2 mt-2"},{default:t(()=>[e(A,{cols:"6",class:"py-0 pr-1"},{default:t(()=>[e(x,{onClick:c[0]||(c[0]=j=>o(4)),loading:d.value,color:m(4),variant:"flat",block:""},{default:t(()=>[v(" Haydovchi ")]),_:1},8,["loading","color"])]),_:1}),e(A,{cols:"6",class:"py-0 pl-1"},{default:t(()=>[e(x,{onClick:c[1]||(c[1]=j=>o(3)),loading:d.value,color:m(3),variant:"flat",block:""},{default:t(()=>[v(" Yo'lovchi ")]),_:1},8,["loading","color"])]),_:1})]),_:1})):b("",!0),l(n).isPassenger||l(n).isDriver?(u(),p(h,{key:2})):b("",!0),e(q,{density:"compact"},{default:t(()=>[e(U,{"prepend-icon":"mdi-car-settings",to:{name:"transports"}},{title:t(()=>[l(n).isDriverAdmins?(u(),M("span",ee," Transportlar ")):(u(),M("span",te," Mening transportlarim "))]),_:1})]),_:1})])])]}),_:1},8,["temporary","modelValue"])}}}),ae={class:"text-right w-100 px-2"},ie=V({__name:"BaseSelectPosition",setup($){const g=D(),i=z(),n=T(!1),d=P(()=>{var c,s;return(c=i.city)!=null&&c.name?(s=i.city)==null?void 0:s.name:"Qayerdasiz?"}),o=H({notification:!0,overlay:!1,loading:!0,city_loading:!1,regions:[],region_districts:[],region_id:null,clearButtonLoading:!1}),m=H({city_id:null,token:g.token});async function _(c){o.region_id=c,o.region_districts=[],o.city_loading=!0,m.city_id=null,await B.get(`district/${c}`).then(({data:s})=>{o.region_districts=s,o.city_loading=!1})}async function C(){o.overlay=!0,m.city_id=null,o.region_id=null;const{data:c}=await B.get("region");if(o.regions=c,i.city==null)return o.overlay=!1;_(i.city.region_id),m.city_id=i.city.id,o.overlay=!1}async function k(){o.clearButtonLoading=!0,await B.post("firebase/set-city-topic",{city_id:null,token:g.token}),i.city=null,o.clearButtonLoading=!1}async function r(){const{data:c}=await B.post("firebase/set-city-topic",m);i.city=c}return R(async()=>{B.post("firebase/get-city-topic",{token:g.token}).then(({data:c})=>{i.city=c,o.loading=!1}).catch(()=>{console.clear(),o.notification=!1,o.loading=!1})}),(c,s)=>{const h=a("v-btn"),x=a("v-icon"),A=a("v-autocomplete"),w=a("v-col"),U=a("BaseForm"),q=a("v-bottom-sheet");return u(),M(Q,null,[y("div",ae,[l(i).city?(u(),p(h,{key:0,icon:"mdi-close",onClick:k,color:"white",size:"x-small",loading:o.clearButtonLoading},null,8,["loading"])):b("",!0),o.notification?(u(),p(h,{key:1,onClick:s[0]||(s[0]=f=>n.value=!0),color:"white",text:d.value,"append-icon":"mdi-map-marker",loading:o.loading},null,8,["text","loading"])):(u(),p(h,{key:2,disabled:"",color:"white"},{default:t(()=>[v("Habarnoma o'chirilgan")]),_:1}))]),e(q,{modelValue:n.value,"onUpdate:modelValue":s[5]||(s[5]=f=>n.value=f),inset:""},{default:t(()=>[e(U,{loading:o.overlay,submit:r,title:"Manzilni o'zgartirish",onClose:s[4]||(s[4]=f=>n.value=!1),onVnodeMounted:C},{default:t(()=>[y("p",null,[e(x,{color:"primary"},{default:t(()=>[v("mdi-bell-outline")]),_:1}),v(" Quyida ko'rsatgan manzilingizga qarab yo'lovchilar haqida sizga habarnoma junatamiz. ")]),e(w,{cols:"12",class:"px-0"},{default:t(()=>[e(A,{"onUpdate:modelValue":[s[1]||(s[1]=f=>_(f)),s[2]||(s[2]=f=>o.region_id=f)],items:o.regions,modelValue:o.region_id,label:"Viloyat","item-title":"name","item-value":f=>f.id,rules:l(N)},null,8,["items","modelValue","item-value","rules"])]),_:1}),e(w,{cols:"12",class:"px-0"},{default:t(()=>[e(A,{disabled:o.region_id==null,items:o.region_districts,modelValue:m.city_id,"onUpdate:modelValue":s[3]||(s[3]=f=>m.city_id=f),label:"Shahar (Tuman)","item-title":"name",loading:o.city_loading,"item-value":f=>f.id,rules:l(N)},null,8,["disabled","items","modelValue","loading","item-value","rules"])]),_:1})]),_:1},8,["loading"])]),_:1},8,["modelValue"])],64)}}}),le=V({__name:"TheAppBar",setup($){const g=D(),i=z();return(n,d)=>{const o=a("v-app-bar-nav-icon"),m=a("v-app-bar");return u(),p(m,{density:"comfortable",elevation:0,border:1,color:"primary"},{prepend:t(()=>[e(o,{color:"white",onClick:d[0]||(d[0]=_=>l(i).menu=!l(i).menu)})]),append:t(()=>[n.$route.meta.clear!=!0&&l(g).isPassenger==!1?(u(),p(ie,{key:0})):b("",!0)]),_:1})}}}),se=V({__name:"TheHeader",setup($){return(g,i)=>(u(),M("header",null,[e(ne),e(le)]))}}),re=y("span",{style:{width:"88px"},class:"tw-leading-none"},"Mening elonlarim",-1),ce=y("span",{style:{width:"88px"},class:"tw-leading-none"},"Haydovchi elonlari",-1),de=y("span",{style:{width:"88px"},class:"tw-leading-none"},"Yo'lovchi elonlari",-1),ue=V({__name:"TheBottomNavigation",setup($){return D(),(g,i)=>{const n=a("v-icon"),d=a("v-btn"),o=a("v-bottom-navigation");return u(),p(o,{color:"primary",class:"text-center"},{default:t(()=>[e(d,{to:{name:"car-rides-auth-user"}},{default:t(()=>[e(n,null,{default:t(()=>[v("mdi-timeline-clock-outline")]),_:1}),re]),_:1}),e(d,{to:{name:"car-rides"}},{default:t(()=>[e(n,null,{default:t(()=>[v("mdi-taxi")]),_:1}),ce]),_:1}),e(d,{to:{name:"passengers"}},{default:t(()=>[e(n,null,{default:t(()=>[v("mdi-human-greeting")]),_:1}),de]),_:1})]),_:1})}}}),_e={class:"px-5 py-3 text-center elevation-1 position-relative"},me={class:"mb-1"},pe={class:"text-pink"},ve=V({__name:"TheAlert",setup($){const g=T(null),i=z();function n(){i.dialog.cancel()}function d(){i.dialog.submitInner()}function o(){setTimeout(()=>g.value.$el.focus())}return(m,_)=>{const C=a("v-icon"),k=a("v-card-text"),r=a("v-spacer"),c=a("v-btn"),s=a("v-card-actions"),h=a("v-card"),x=a("v-form"),A=a("v-dialog");return u(),p(A,{width:"400",modelValue:l(i).dialog.model,"onUpdate:modelValue":_[2]||(_[2]=w=>l(i).dialog.model=w)},{default:t(()=>[e(x,{onSubmit:_[1]||(_[1]=E(w=>n(),["prevent"])),onVnodeMounted:o,onVnodeUnmounted:l(i).dialog.reset},{default:t(()=>[e(h,null,{default:t(()=>[y("main",_e,[y("div",me,[e(C,{color:"primary",size:"40"},{default:t(()=>[v(S(l(i).dialog.icon),1)]),_:1})]),y("span",pe,S(l(i).dialog.title),1)]),e(k,{class:"bg-grey-lighten-4"},{default:t(()=>[v(S(l(i).dialog.subTitle),1)]),_:1}),e(s,{class:"bg-grey-lighten-4"},{default:t(()=>[e(r),e(c,{text:"Yoq",ref_key:"btnCalcel",ref:g,color:"primary",variant:"tonal",type:"submit",class:"",onClick:_[0]||(_[0]=w=>l(i).dialog.model=!1)},null,512),e(c,{text:"Ha",type:"button",color:"gray",variant:"tonal",onClick:d})]),_:1})]),_:1})]),_:1},8,["onVnodeUnmounted"])]),_:1},8,["modelValue"])}}}),ge=V({__name:"FormAdd-TransportForce",setup($){const g=D(),i=T(),n=H({overlay:!1}),d=T([]),o=T(!1),m=P(()=>g.isDriverAdmins?d.value.length==0:!1),_=G();async function C(){const k=i.value.formData,r=await _.create(k);d.value.push(r)}return R(async()=>{d.value=await O.onlyAuthUser(),o.value=!0}),(k,r)=>{const c=a("BaseForm"),s=a("v-dialog");return o.value?(u(),p(s,{key:0,modelValue:m.value,"onUpdate:modelValue":r[2]||(r[2]=h=>m.value=h),scrollable:"",width:"600px"},{default:t(()=>[e(c,{loading:n.overlay,submit:C,title:"Transport kiritish"},{default:t(()=>[e(l(J),{onVnodeMounted:r[0]||(r[0]=h=>n.overlay=!0),onOnReady:r[1]||(r[1]=h=>n.overlay=!1),ref_key:"inputComponent",ref:i},null,512)]),_:1},8,["loading"])]),_:1},8,["modelValue"])):b("",!0)}}}),ye=V({__name:"General",setup($){return(g,i)=>{const n=a("router-view"),d=a("v-container"),o=a("v-main"),m=a("v-app");return u(),p(m,{class:"bg-grey-lighten-4"},{default:t(()=>[e(ge),e(ve),e(o,null,{default:t(()=>[e(se),e(d,{class:"h-100 pb-3"},{default:t(()=>[e(n,{class:"h-100 position-relative mx-n2"})]),_:1})]),_:1}),e(ue)]),_:1})}}});export{ye as default};
