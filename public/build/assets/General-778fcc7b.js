import{d as w,u as P,a as S,b as z,i as j,r as n,o as _,c as v,w as e,e as m,f as t,g,t as C,h as i,j as b,k as D,l as F,m as q,n as L,p as B,q as U,s as M,v as I}from"./app-9d059da3.js";const Q={class:"d-flex align-center py-4 px-2 bg-slate-100"},Y={class:"font-weight-bold text-h6 leading-none mt-2"},E={class:"text-caption text-blue-grey-lighten-1"},G={class:"pa-2"},J={class:"pa-2"},K=w({__name:"TheLeftNavigator",setup(V){const{name:u}=P(),a=S(),p=z(),r=j("deferredPrompt");function o(){const d=S();d.dialog.open(()=>{d.dialog.title="Dasturdan chiqmoqchimisiz ?",d.dialog.submit=()=>p.logout()})}function c(){r&&(r.value.prompt(),r.value.userChoice.then(d=>{d.outcome==="accepted"?console.log("user accepted A2HS prompt"):console.log("user dismissed A2HS prompt"),r.value=null}))}return(d,x)=>{const y=n("v-icon"),l=n("v-divider"),s=n("v-list-item"),T=n("v-list"),$=n("v-btn"),A=n("v-navigation-drawer");return _(),v(A,{temporary:i(u)=="sm",modelValue:i(a).menu,"onUpdate:modelValue":x[0]||(x[0]=h=>i(a).menu=h)},{append:e(()=>[m("div",J,[t($,{onClick:o,block:"","append-icon":"mdi-logout"},{default:e(()=>[g(" Chiqish ")]),_:1})])]),default:e(()=>{var h,k;return[m("main",Q,[t(y,{color:"primary",size:"40"},{default:e(()=>[g("mdi-vuetify")]),_:1}),m("aside",null,[m("div",Y,C((h=i(p).user)==null?void 0:h.name),1),m("div",E,C((k=i(p).user)==null?void 0:k.phone),1)])]),t(l),m("div",null,[i(p).isAnyAdmins?(_(),v(T,{key:0,density:"compact"},{default:e(()=>[t(s,{"prepend-icon":"mdi-car-settings",title:"Junatilgan transportlar",color:"primary",to:{name:"car-ride-inactive"}})]),_:1})):b("",!0),t(l),m("div",G,[i(r)?(_(),v($,{key:0,onClick:c,block:"","append-icon":"mdi-download",variant:"tonal"},{default:e(()=>[g(" Ilovani o'rnatish ")]),_:1})):b("",!0)])])]}),_:1},8,["temporary","modelValue"])}}}),O={class:"d-flex align-center"},R=w({__name:"TheAppBar",setup(V){const u=S(),a=z();return(p,r)=>{const o=n("v-app-bar-nav-icon"),c=n("v-icon"),d=n("v-app-bar-title"),x=n("v-app-bar");return _(),v(x,{density:"comfortable",elevation:0,border:1,color:"primary"},{prepend:e(()=>[t(o,{color:"white",onClick:r[0]||(r[0]=y=>i(u).menu=!i(u).menu)})]),default:e(()=>[t(d,null,{default:e(()=>{var y,l;return[m("div",O,[i(a).isDriver?(_(),v(c,{key:0},{default:e(()=>[g("mdi-chess-knight")]),_:1})):b("",!0),i(a).isPassenger?(_(),v(c,{key:1},{default:e(()=>[g("mdi-chess-pawn")]),_:1})):b("",!0),i(a).isAdmin?(_(),v(c,{key:2},{default:e(()=>[g("mdi-chess-rook")]),_:1})):b("",!0),i(a).isSuperAdmin?(_(),v(c,{key:3},{default:e(()=>[g("mdi-chess-king")]),_:1})):b("",!0),m("span",null,C((l=(y=i(a).user)==null?void 0:y.role)==null?void 0:l.name),1)])]}),_:1})]),_:1})}}}),W={class:"text-right w-100 px-2"},X={class:"text-caption"},Z=w({__name:"TheLittleAppBar",setup(V){const u=z(),a=D(null),p=D(!1),r=F(()=>{var l,s;return(l=a.value)!=null&&l.name?(s=a.value)==null?void 0:s.name:"Tanlang"}),o=q({overlay:!1,loading:!0,city_loading:!1,regions:[],region_districts:[],region_id:null}),c=q({city_id:null,token:u.user.token});async function d(l){o.region_id=l,o.region_districts=[],o.city_loading=!0,c.city_id=null,await B.get(`district/${l}`).then(({data:s})=>{o.region_districts=s,o.city_loading=!1})}async function x(){o.overlay=!0,c.city_id=null,o.region_id=null;const{data:l}=await B.get("region");o.regions=l,d(a.value.region_id),c.city_id=a.value.id,o.overlay=!1}async function y(){const{data:l}=await B.post("firebase/set-city-topic",c);a.value=l}return L(async()=>{B.post("firebase/get-city-topic",{token:u.token}).then(({data:l})=>{a.value=l,o.loading=!1})}),(l,s)=>{const T=n("v-btn"),$=n("v-icon"),A=n("v-autocomplete"),h=n("v-col"),k=n("BaseForm"),N=n("v-bottom-sheet"),H=n("v-app-bar");return _(),v(H,{density:"compact",elevation:0,border:1},{default:e(()=>[m("div",W,[t(T,{onClick:s[0]||(s[0]=f=>p.value=!0),text:r.value,"append-icon":"mdi-map-marker",loading:o.loading},null,8,["text","loading"])]),t(N,{modelValue:p.value,"onUpdate:modelValue":s[5]||(s[5]=f=>p.value=f),inset:""},{default:e(()=>[t(k,{loading:o.overlay,submit:y,title:"Manzilni o'zgartirish",onClose:s[4]||(s[4]=f=>p.value=!1),onVnodeMounted:x},{default:e(()=>[m("p",X,[t($,{color:"primary"},{default:e(()=>[g("mdi-bell-outline")]),_:1}),g(" Quyida ko'rsatgan manzilingizga qarab yo'lovchilar haqida sizga habarnoma junatamiz. ")]),t(h,{cols:"12",class:"px-0"},{default:e(()=>[t(A,{"onUpdate:modelValue":[s[1]||(s[1]=f=>d(f)),s[2]||(s[2]=f=>o.region_id=f)],items:o.regions,modelValue:o.region_id,label:"Viloyat","item-title":"name","item-value":f=>f.id,rules:i(U)},null,8,["items","modelValue","item-value","rules"])]),_:1}),t(h,{cols:"12",class:"px-0"},{default:e(()=>[t(A,{disabled:o.region_id==null,items:o.region_districts,modelValue:c.city_id,"onUpdate:modelValue":s[3]||(s[3]=f=>c.city_id=f),label:"Shahar (Tuman)","item-title":"name",loading:o.city_loading,"item-value":f=>f.id,rules:i(U)},null,8,["disabled","items","modelValue","loading","item-value","rules"])]),_:1})]),_:1},8,["loading"])]),_:1},8,["modelValue"])]),_:1})}}}),ee=w({__name:"TheHeader",setup(V){return(u,a)=>(_(),M("header",null,[t(K),t(R),t(Z)]))}}),te=m("span",{style:{width:"88px"},class:"tw-leading-none"},"Mening qatnovlarim",-1),ne=m("span",{style:{width:"88px"},class:"tw-leading-none"},"Qatnovlar",-1),oe=m("span",{style:{width:"88px"},class:"tw-leading-none"},"Yo'lovchilar",-1),ae={key:0,style:{width:"88px"},class:"tw-leading-none"},ie={key:1,style:{width:"88px"},class:"tw-leading-none"},se=w({__name:"TheBottomNavigation",setup(V){const u=z();return(a,p)=>{const r=n("v-icon"),o=n("v-btn"),c=n("v-bottom-navigation");return _(),v(c,{color:"primary",class:"text-center"},{default:e(()=>[i(u).isDriver?(_(),v(o,{key:0,to:{name:"car-rides-auth-user"}},{default:e(()=>[t(r,null,{default:e(()=>[g("mdi-taxi")]),_:1}),te]),_:1})):b("",!0),t(o,{to:{name:"car-rides"}},{default:e(()=>[t(r,null,{default:e(()=>[g("mdi-timeline-clock-outline")]),_:1}),ne]),_:1}),i(u).isPassengerAdmins?(_(),v(o,{key:1,to:{name:"passengers"}},{default:e(()=>[t(r,null,{default:e(()=>[g("mdi-human-greeting")]),_:1}),oe]),_:1})):b("",!0),i(u).isDriverAdmins?(_(),v(o,{key:2,to:{name:"transports"}},{default:e(()=>[t(r,null,{default:e(()=>[g("mdi-train-car")]),_:1}),i(u).isDriverAdmins?(_(),M("span",ae," Transportlar ")):(_(),M("span",ie," Mening transportim "))]),_:1})):b("",!0)]),_:1})}}}),le={class:"px-5 py-3 text-center tw-shadow-sm tw-relative"},re={class:"mb-1"},ce={class:"text-pink"},de=w({__name:"TheAlert",setup(V){const u=D(null),a=S();function p(){a.dialog.cancel()}function r(){a.dialog.submitInner()}function o(){setTimeout(()=>u.value.$el.focus())}return(c,d)=>{const x=n("v-icon"),y=n("v-card-text"),l=n("v-spacer"),s=n("v-btn"),T=n("v-card-actions"),$=n("v-card"),A=n("v-form"),h=n("v-dialog");return _(),v(h,{width:"400",modelValue:i(a).dialog.model,"onUpdate:modelValue":d[2]||(d[2]=k=>i(a).dialog.model=k)},{default:e(()=>[t(A,{onSubmit:d[1]||(d[1]=I(k=>p(),["prevent"])),onVnodeMounted:o,onVnodeUnmounted:i(a).dialog.reset},{default:e(()=>[t($,null,{default:e(()=>[m("main",le,[m("div",re,[t(x,{color:"primary",size:"40"},{default:e(()=>[g(C(i(a).dialog.icon),1)]),_:1})]),m("span",ce,C(i(a).dialog.title),1)]),t(y,{class:"tw-bg-slate-50"},{default:e(()=>[g(C(i(a).dialog.subTitle),1)]),_:1}),t(T,{class:"tw-bg-slate-50"},{default:e(()=>[t(l),t(s,{text:"Yoq",ref_key:"btnCalcel",ref:u,color:"primary",variant:"tonal",type:"submit",class:"tw-bg-gray-50 focus:tw-outline-2 focus:tw-outline-red-300 focus:tw-outline",onClick:d[0]||(d[0]=k=>i(a).dialog.model=!1)},null,512),t(s,{text:"Ha",type:"button",color:"gray",variant:"tonal",onClick:r})]),_:1})]),_:1})]),_:1},8,["onVnodeUnmounted"])]),_:1},8,["modelValue"])}}}),ue=w({__name:"General",setup(V){return(u,a)=>{const p=n("router-view"),r=n("v-container"),o=n("v-main"),c=n("v-app");return _(),v(c,{class:"bg-grey-lighten-4"},{default:e(()=>[t(de),t(o,null,{default:e(()=>[t(ee),t(r,{class:"h-100"},{default:e(()=>[t(p,{class:"h-100 position-relative mx-n2"})]),_:1})]),_:1}),t(se)]),_:1})}}});export{ue as default};
