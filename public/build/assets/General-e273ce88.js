import{d as w,u as L,a as S,r as z,c as F,b as H,o as D,e as B,f as n,g as _,h as A,i as c,j as g,w as o,k as v,l as t,m as s,n as T,_ as I,F as j,p as P,q as Q,t as k,s as Y,U as E,v as G,x as O}from"./app-62f9ceec.js";const R={class:"text-right w-100"},J={class:"mb-3"},K=w({__name:"BaseSelectPosition",setup(x){const m=L(),e=S(),i=z(!1),r=F(()=>{var u,l;return(u=e.city)!=null&&u.name?(l=e.city)==null?void 0:l.name:"Qayerdasiz?"}),a=H({notification:!0,overlay:!1,loading:!0,regions:[],districts:[],clearButtonLoading:!1}),f=H({city_id:null,token:m.token});async function d(){a.overlay=!0,f.city_id=null;const{data:u}=await B.get("region");a.regions=u;const{data:l}=await B.get("district");if(a.districts=l,e.city==null)return a.overlay=!1;f.city_id=e.city.id,a.overlay=!1}async function y(){a.clearButtonLoading=!0,await B.post("firebase/set-city-topic",{city_id:null,token:m.token}),e.city=null,a.clearButtonLoading=!1,i.value=!1}async function h(){const{data:u}=await B.post("firebase/set-city-topic",f);e.city=u}return D(async()=>{B.post("firebase/get-city-topic",{token:m.token}).then(({data:u})=>{e.city=u||null,a.loading=!1}).catch(()=>{console.clear(),a.notification=!1,a.loading=!1})}),(u,l)=>{const b=n("v-btn"),$=n("v-icon"),V=n("BaseForm"),C=n("v-bottom-sheet");return _(),A(j,null,[c("div",R,[a.notification?(_(),g(b,{key:0,variant:"tonal",onClick:l[0]||(l[0]=p=>i.value=!0),text:r.value,"append-icon":"mdi-map-marker",loading:a.loading,block:""},null,8,["text","loading"])):(_(),g(b,{key:1,disabled:"",color:"white",block:""},{default:o(()=>[v("Habarnoma o'chirilgan")]),_:1}))]),t(C,{modelValue:i.value,"onUpdate:modelValue":l[3]||(l[3]=p=>i.value=p),inset:""},{default:o(()=>[t(V,{loading:a.overlay,submit:h,title:"Manzilni o'zgartirish",onClose:l[2]||(l[2]=p=>i.value=!1),onVnodeMounted:d},{action:o(()=>[s(e).city?(_(),g(b,{key:0,color:"primary",loading:a.clearButtonLoading,"append-icon":"mdi-close",variant:"text",onClick:y},{default:o(()=>[v(" O'chirish ")]),_:1},8,["loading"])):T("",!0)]),default:o(()=>[c("p",J,[t($,{color:"primary"},{default:o(()=>[v("mdi-bell-outline")]),_:1}),v(" Quyida ko'rsatgan manzilingizga qarab yo'lovchilar haqida sizga habarnoma junatamiz. ")]),t(I,{categories:a.regions,subCategories:a.districts,loading:a.loading,modelValue:f.city_id,"onUpdate:modelValue":l[1]||(l[1]=p=>f.city_id=p),startText:"Tanlang?",class:"mb-1"},null,8,["categories","subCategories","loading","modelValue"])]),_:1},8,["loading"])]),_:1},8,["modelValue"])],64)}}}),W={class:"d-flex align-center py-4 px-2 bg-grey-lighten-4"},X={class:"font-weight-bold text-h6 leading-none mt-2"},Z={class:"text-caption text-blue-grey-lighten-1"},tt={key:0},et={key:1},ot={class:"pa-2"},nt={class:"pa-2"},at={class:"mb-2 text-right"},it=c("a",{href:"tel:+99893 660 09 60",class:"d-block text-decoration-none text-caption text-primary"},"+99893 660 09 60",-1),st=c("a",{href:"tel:+99893 660 09 60",class:"d-block text-decoration-none text-caption text-primary"},"+99894 677 11 34",-1),lt=w({__name:"TheLeftNavigator",setup(x){const{name:m}=P(),e=S(),i=L(),r=Q("deferredPrompt");function a(){const d=S();d.dialog.open(()=>{d.dialog.title="Dasturdan chiqmoqchimisiz ?",d.dialog.submit=()=>i.logout()})}function f(){r&&(r.value.prompt(),r.value.userChoice.then(d=>{d.outcome==="accepted"?console.log("user accepted A2HS prompt"):console.log("user dismissed A2HS prompt"),r.value=null}))}return(d,y)=>{const h=n("v-icon"),u=n("v-divider"),l=n("v-btn"),b=n("v-list-item"),$=n("v-list"),V=n("v-label"),C=n("v-navigation-drawer");return _(),g(C,{temporary:s(m)=="sm",modelValue:s(e).menu,"onUpdate:modelValue":y[0]||(y[0]=p=>s(e).menu=p)},{append:o(()=>[c("div",nt,[c("div",at,[t(V,{class:"text-caption mr-1"},{default:o(()=>[v(" Savol va takliflar uchun ")]),_:1}),it,st]),t(l,{onClick:a,block:"","append-icon":"mdi-logout"},{default:o(()=>[v(" Chiqish ")]),_:1})])]),default:o(()=>{var p,U,M,N,q;return[c("main",W,[t(h,{color:"primary",size:"40"},{default:o(()=>[v("mdi-vuetify")]),_:1}),c("aside",null,[c("div",X,k((p=s(i).user)==null?void 0:p.name),1),c("div",Z,[(U=s(i).user)!=null&&U.phone?(_(),A("span",tt,k((M=s(i).user)==null?void 0:M.phone),1)):T("",!0),(N=s(i).user)!=null&&N.telegram_user_id?(_(),A("span",et,k((q=s(i).user)==null?void 0:q.telegram_user_id),1)):T("",!0)])])]),t(u),c("div",null,[c("div",ot,[s(r)?(_(),g(l,{key:0,onClick:f,block:"","append-icon":"mdi-download",variant:"tonal",class:"mb-2"},{default:o(()=>[v(" Ilovani o'rnatish ")]),_:1})):T("",!0),s(r)?(_(),g(u,{key:1,class:"mb-2"})):T("",!0),t(K),t($,{density:"compact"},{default:o(()=>[t(b,{title:"Transportlarim","prepend-icon":"mdi-car-settings",to:{name:"user-transports"},class:"mb-2"})]),_:1})])])]}),_:1},8,["temporary","modelValue"])}}}),ct=w({__name:"TheAppBar",setup(x){const m=S(),e=z([]),i=z(null);async function r(){e.value=await E.activeNotifications()}return D(async()=>{r(),i.value=setInterval(()=>{r()},3e4)}),Y(()=>{clearInterval(i.value)}),(a,f)=>{const d=n("v-app-bar-nav-icon"),y=n("v-btn"),h=n("v-app-bar");return _(),g(h,{density:"comfortable",elevation:0,border:1,color:"primary"},{prepend:o(()=>[t(d,{color:"white",onClick:f[0]||(f[0]=u=>s(m).menu=!s(m).menu)})]),append:o(()=>[e.value.length?(_(),g(y,{key:0,color:"white",icon:"mdi-bell-badge",to:{name:"notifications"}})):(_(),g(y,{key:1,color:"white",icon:"mdi-bell",to:{name:"notifications"}}))]),_:1})}}}),rt=w({__name:"TheHeader",setup(x){return(m,e)=>(_(),A("header",null,[t(lt),t(ct)]))}}),dt={},_t=c("span",{style:{width:"88px"},class:"tw-leading-none"},"Mening elonlarim",-1),ut=c("span",{style:{width:"88px"},class:"tw-leading-none"},"Haydovchilar",-1),mt=c("span",{style:{width:"88px"},class:"tw-leading-none"},"Yo'lovchilar",-1);function pt(x,m){const e=n("v-icon"),i=n("v-btn"),r=n("v-bottom-navigation");return _(),g(r,{color:"primary",class:"text-center"},{default:o(()=>[t(i,{to:{name:"auth-user"}},{default:o(()=>[t(e,null,{default:o(()=>[v("mdi-account")]),_:1}),_t]),_:1}),t(i,{to:{name:"car-rides"}},{default:o(()=>[t(e,null,{default:o(()=>[v("mdi-taxi")]),_:1}),ut]),_:1}),t(i,{to:{name:"passengers"}},{default:o(()=>[t(e,null,{default:o(()=>[v("mdi-human-greeting")]),_:1}),mt]),_:1})]),_:1})}const vt=G(dt,[["render",pt]]),gt={class:"px-5 py-3 text-center elevation-1 position-relative"},ft={class:"mb-1"},yt={class:"text-pink"},ht=w({__name:"TheAlert",setup(x){const m=z(null),e=S();function i(){e.dialog.cancel()}function r(){e.dialog.submitInner()}function a(){setTimeout(()=>m.value.$el.focus())}return(f,d)=>{const y=n("v-icon"),h=n("v-card-text"),u=n("v-spacer"),l=n("v-btn"),b=n("v-card-actions"),$=n("v-card"),V=n("v-form"),C=n("v-dialog");return _(),g(C,{width:"400",modelValue:s(e).dialog.model,"onUpdate:modelValue":d[2]||(d[2]=p=>s(e).dialog.model=p)},{default:o(()=>[t(V,{onSubmit:d[1]||(d[1]=O(p=>i(),["prevent"])),onVnodeMounted:a,onVnodeUnmounted:s(e).dialog.reset},{default:o(()=>[t($,null,{default:o(()=>[c("main",gt,[c("div",ft,[t(y,{color:"primary",size:"40"},{default:o(()=>[v(k(s(e).dialog.icon),1)]),_:1})]),c("span",yt,k(s(e).dialog.title),1)]),t(h,{class:"bg-grey-lighten-4"},{default:o(()=>[v(k(s(e).dialog.subTitle),1)]),_:1}),t(b,{class:"bg-grey-lighten-4"},{default:o(()=>[t(u),t(l,{text:"Yoq",ref_key:"btnCalcel",ref:m,color:"primary",variant:"tonal",type:"submit",class:"",onClick:d[0]||(d[0]=p=>s(e).dialog.model=!1)},null,512),t(l,{text:"Ha",type:"button",color:"gray",variant:"tonal",onClick:r})]),_:1})]),_:1})]),_:1},8,["onVnodeUnmounted"])]),_:1},8,["modelValue"])}}}),xt=w({__name:"General",setup(x){return(m,e)=>{const i=n("router-view"),r=n("v-main"),a=n("v-app");return _(),g(a,{class:"bg-grey-lighten-4"},{default:o(()=>[t(ht),t(r,null,{default:o(()=>[t(rt),t(i,{class:"h-100 position-relative"})]),_:1}),t(vt)]),_:1})}}});export{xt as default};
