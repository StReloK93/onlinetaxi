import{d as $,u as R,a as T,b as S,c as j,r as D,i as Y,e as i,o as r,f as c,w as e,g as _,h as t,j as d,k as s,l as h,t as A,m as I,n as H,p as Q,q as B,s as P,_ as E,F as G,v as J}from"./app-8ca2de1d.js";const K={class:"d-flex align-center py-4 px-2 bg-grey-lighten-4"},O={class:"font-weight-bold text-h6 leading-none mt-2"},W={class:"text-caption text-blue-grey-lighten-1"},X={class:"pa-2"},Z={class:"pa-2"},ee=$({__name:"TheLeftNavigator",setup(C){const{name:m}=R(),l=T(),o=S(),u=j(),n=D(!1);async function p(a){o.user.role_id!=a&&(n.value=!0,await o.changeRole(a),a==3&&u.push({name:"passengers"}),a==4&&u.push({name:"car-rides"}),n.value=!1)}function g(a){return o.user.role_id==a?"primary":"grey-lighten-4"}const b=Y("deferredPrompt");function V(){const a=T();a.dialog.open(()=>{a.dialog.title="Dasturdan chiqmoqchimisiz ?",a.dialog.submit=()=>o.logout()})}function v(){b&&(b.value.prompt(),b.value.userChoice.then(a=>{a.outcome==="accepted"?console.log("user accepted A2HS prompt"):console.log("user dismissed A2HS prompt"),b.value=null}))}return(a,f)=>{const k=i("v-icon"),w=i("v-divider"),x=i("v-btn"),y=i("v-col"),L=i("v-row"),M=i("v-list-item"),N=i("v-list"),U=i("v-navigation-drawer");return r(),c(U,{temporary:s(m)=="sm",modelValue:s(l).menu,"onUpdate:modelValue":f[2]||(f[2]=z=>s(l).menu=z)},{append:e(()=>[_("div",Z,[t(x,{onClick:V,block:"","append-icon":"mdi-logout"},{default:e(()=>[d(" Chiqish ")]),_:1})])]),default:e(()=>{var z,q;return[_("main",K,[s(o).isDriver?(r(),c(k,{key:0,color:"primary",size:"40"},{default:e(()=>[d("mdi-chess-knight")]),_:1})):h("",!0),s(o).isPassenger?(r(),c(k,{key:1,color:"primary",size:"40"},{default:e(()=>[d("mdi-chess-pawn")]),_:1})):h("",!0),s(o).isAdmin?(r(),c(k,{key:2,color:"primary",size:"40"},{default:e(()=>[d("mdi-chess-rook")]),_:1})):h("",!0),s(o).isSuperAdmin?(r(),c(k,{key:3,color:"primary",size:"40"},{default:e(()=>[d("mdi-chess-king")]),_:1})):h("",!0),_("aside",null,[_("div",O,A((z=s(o).user)==null?void 0:z.name),1),_("div",W,A((q=s(o).user)==null?void 0:q.phone),1)])]),t(w),_("div",null,[_("div",X,[s(b)?(r(),c(x,{key:0,onClick:v,block:"","append-icon":"mdi-download",variant:"tonal",class:"mb-2"},{default:e(()=>[d(" Ilovani o'rnatish ")]),_:1})):h("",!0),s(b)?(r(),c(w,{key:1})):h("",!0),s(o).isPassenger||s(o).isDriver?(r(),c(L,{key:2,class:"my-2"},{default:e(()=>[t(y,{cols:"6",class:"py-0 pr-1"},{default:e(()=>[t(x,{onClick:f[0]||(f[0]=F=>p(4)),loading:n.value,color:g(4),variant:"flat",block:""},{default:e(()=>[d(" Haydovchi ")]),_:1},8,["loading","color"])]),_:1}),t(y,{cols:"6",class:"py-0 pl-1"},{default:e(()=>[t(x,{onClick:f[1]||(f[1]=F=>p(3)),loading:n.value,color:g(3),variant:"flat",block:""},{default:e(()=>[d(" Yo'lovchi ")]),_:1},8,["loading","color"])]),_:1})]),_:1})):h("",!0),s(o).isPassenger||s(o).isDriver?(r(),c(w,{key:3})):h("",!0),t(N,{density:"compact"},{default:e(()=>[s(o).isDriverAdmins?(r(),c(M,{key:0,title:"Transportlarim","prepend-icon":"mdi-car-settings",to:{name:"user-transports"},class:"mb-2"})):h("",!0),s(o).isAnyAdmins?(r(),c(M,{key:1,"prepend-icon":"mdi-train-car",title:"Barcha Transportlar",to:{name:"transports"}})):h("",!0)]),_:1})])])]}),_:1},8,["temporary","modelValue"])}}}),te={class:"text-right w-100 px-2"},oe={class:"mb-3"},ne=$({__name:"BaseSelectPosition",setup(C){const m=S(),l=T(),o=D(!1),u=I(()=>{var v,a;return(v=l.city)!=null&&v.name?(a=l.city)==null?void 0:a.name:"Qayerdasiz?"}),n=H({notification:!0,overlay:!1,loading:!0,regions:[],districts:[],clearButtonLoading:!1}),p=H({city_id:null,token:m.token});async function g(){n.overlay=!0,p.city_id=null;const{data:v}=await B.get("region");n.regions=v;const{data:a}=await B.get("district");if(n.districts=a,l.city==null)return n.overlay=!1;p.city_id=l.city.id,n.overlay=!1}async function b(){n.clearButtonLoading=!0,await B.post("firebase/set-city-topic",{city_id:null,token:m.token}),l.city=null,n.clearButtonLoading=!1}async function V(){const{data:v}=await B.post("firebase/set-city-topic",p);l.city=v}return Q(async()=>{B.post("firebase/get-city-topic",{token:m.token}).then(({data:v})=>{l.city=v,n.loading=!1}).catch(()=>{console.clear(),n.notification=!1,n.loading=!1})}),(v,a)=>{const f=i("v-btn"),k=i("v-icon"),w=i("BaseForm"),x=i("v-bottom-sheet");return r(),P(G,null,[_("div",te,[s(l).city?(r(),c(f,{key:0,icon:"mdi-close",onClick:b,color:"white",size:"x-small",loading:n.clearButtonLoading},null,8,["loading"])):h("",!0),n.notification?(r(),c(f,{key:1,onClick:a[0]||(a[0]=y=>o.value=!0),color:"white",text:u.value,"append-icon":"mdi-map-marker",loading:n.loading},null,8,["text","loading"])):(r(),c(f,{key:2,disabled:"",color:"white"},{default:e(()=>[d("Habarnoma o'chirilgan")]),_:1}))]),t(x,{modelValue:o.value,"onUpdate:modelValue":a[3]||(a[3]=y=>o.value=y),inset:""},{default:e(()=>[t(w,{loading:n.overlay,submit:V,title:"Manzilni o'zgartirish",onClose:a[2]||(a[2]=y=>o.value=!1),onVnodeMounted:g},{default:e(()=>[_("p",oe,[t(k,{color:"primary"},{default:e(()=>[d("mdi-bell-outline")]),_:1}),d(" Quyida ko'rsatgan manzilingizga qarab yo'lovchilar haqida sizga habarnoma junatamiz. ")]),t(E,{categories:n.regions,subCategories:n.districts,loading:n.loading,modelValue:p.city_id,"onUpdate:modelValue":a[1]||(a[1]=y=>p.city_id=y),startText:"Tanlang?",class:"mb-1"},null,8,["categories","subCategories","loading","modelValue"])]),_:1},8,["loading"])]),_:1},8,["modelValue"])],64)}}}),ae=$({__name:"TheAppBar",setup(C){const m=S(),l=T();return(o,u)=>{const n=i("v-app-bar-nav-icon"),p=i("v-app-bar");return r(),c(p,{density:"comfortable",elevation:0,border:1,color:"primary"},{prepend:e(()=>[t(n,{color:"white",onClick:u[0]||(u[0]=g=>s(l).menu=!s(l).menu)})]),append:e(()=>[s(m).isPassenger==!1?(r(),c(ne,{key:0})):h("",!0)]),_:1})}}}),ie=$({__name:"TheHeader",setup(C){return(m,l)=>(r(),P("header",null,[t(ee),t(ae)]))}}),se=_("span",{style:{width:"88px"},class:"tw-leading-none"},"Mening elonlarim",-1),le=_("span",{style:{width:"88px"},class:"tw-leading-none"},"Haydovchilar",-1),re=_("span",{style:{width:"88px"},class:"tw-leading-none"},"Yo'lovchilar",-1),ce=$({__name:"TheBottomNavigation",setup(C){return S(),(m,l)=>{const o=i("v-icon"),u=i("v-btn"),n=i("v-bottom-navigation");return r(),c(n,{color:"primary",class:"text-center"},{default:e(()=>[t(u,{to:{name:"car-rides-auth-user"}},{default:e(()=>[t(o,null,{default:e(()=>[d("mdi-timeline-clock-outline")]),_:1}),se]),_:1}),t(u,{to:{name:"car-rides"}},{default:e(()=>[t(o,null,{default:e(()=>[d("mdi-taxi")]),_:1}),le]),_:1}),t(u,{to:{name:"passengers"}},{default:e(()=>[t(o,null,{default:e(()=>[d("mdi-human-greeting")]),_:1}),re]),_:1})]),_:1})}}}),de={class:"px-5 py-3 text-center elevation-1 position-relative"},ue={class:"mb-1"},_e={class:"text-pink"},me=$({__name:"TheAlert",setup(C){const m=D(null),l=T();function o(){l.dialog.cancel()}function u(){l.dialog.submitInner()}function n(){setTimeout(()=>m.value.$el.focus())}return(p,g)=>{const b=i("v-icon"),V=i("v-card-text"),v=i("v-spacer"),a=i("v-btn"),f=i("v-card-actions"),k=i("v-card"),w=i("v-form"),x=i("v-dialog");return r(),c(x,{width:"400",modelValue:s(l).dialog.model,"onUpdate:modelValue":g[2]||(g[2]=y=>s(l).dialog.model=y)},{default:e(()=>[t(w,{onSubmit:g[1]||(g[1]=J(y=>o(),["prevent"])),onVnodeMounted:n,onVnodeUnmounted:s(l).dialog.reset},{default:e(()=>[t(k,null,{default:e(()=>[_("main",de,[_("div",ue,[t(b,{color:"primary",size:"40"},{default:e(()=>[d(A(s(l).dialog.icon),1)]),_:1})]),_("span",_e,A(s(l).dialog.title),1)]),t(V,{class:"bg-grey-lighten-4"},{default:e(()=>[d(A(s(l).dialog.subTitle),1)]),_:1}),t(f,{class:"bg-grey-lighten-4"},{default:e(()=>[t(v),t(a,{text:"Yoq",ref_key:"btnCalcel",ref:m,color:"primary",variant:"tonal",type:"submit",class:"",onClick:g[0]||(g[0]=y=>s(l).dialog.model=!1)},null,512),t(a,{text:"Ha",type:"button",color:"gray",variant:"tonal",onClick:u})]),_:1})]),_:1})]),_:1},8,["onVnodeUnmounted"])]),_:1},8,["modelValue"])}}}),ve=$({__name:"General",setup(C){return(m,l)=>{const o=i("router-view"),u=i("v-container"),n=i("v-main"),p=i("v-app");return r(),c(p,{class:"bg-grey-lighten-4"},{default:e(()=>[t(me),t(n,null,{default:e(()=>[t(ie),t(u,{class:"h-100 pb-3"},{default:e(()=>[t(o,{class:"h-100 position-relative mx-n2"})]),_:1})]),_:1}),t(ce)]),_:1})}}});export{ve as default};
